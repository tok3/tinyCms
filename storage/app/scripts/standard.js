/*! License information can be found in ini-bf.js.LICENSE.txt */
(()=>{"use strict";var ezai=!0;"undefined"!=typeof iniBfExclusionsBase&&null!=iniBfExclusionsBase&&function(){const currentUrl=window.location.href,urlObj=new URL(currentUrl),baseCurrentUrl=urlObj.origin+urlObj.pathname;return iniBfExclusionsBase.some((excludedUrl=>{const excludedUrlObj=new URL(excludedUrl),baseExcludedUrl=excludedUrlObj.origin+excludedUrlObj.pathname;return baseCurrentUrl===baseExcludedUrl}))}()&&(console.log("URL excluded"),ezai=!1),"undefined"!=typeof iniBfExclusionsSegment&&null!=iniBfExclusionsSegment&&function(){const segments=window.location.pathname.split("/").filter((segment=>""!==segment));for(const[index,value]of Object.entries(iniBfExclusionsSegment)){if(segments[parseInt(index)-1]===value)return!0}return!1}()&&(console.log("URL excluded segment"),ezai=!1),"undefined"!=typeof iniBfExclusionsQuerystring&&null!=iniBfExclusionsQuerystring&&function(){const currentUrl=window.location.href,urlObj=new URL(currentUrl),qstringCurrentUrl=urlObj.origin+urlObj.pathname+urlObj.search;return console.log(urlObj.search),iniBfExclusionsQuerystring.some((excludedUrl=>{const excludedUrlObj=new URL(excludedUrl),qstringExcludedUrl=excludedUrlObj.origin+excludedUrlObj.pathname+excludedUrlObj.search;return qstringCurrentUrl===qstringExcludedUrl}))}()&&(console.log("URL excluded querystring"),ezai=!1);const translations={de:{closeAccessibility:"Barrierfreiheit schließen",specialModes:"Spezielle Modi für Beeinträchtigungen",epilepsyMode:"Modus für Epileptiker",epilepsySafety:"Epilepsie-Sicherheit",epilepsyDescription:"Dieser Modus ermöglicht es Menschen mit Epilepsie, die Website sicher zu nutzen, indem er das Risiko von Anfällen durch flackernde Animationen und ungünstige Farbkombinationen beseitigt..",lowVision:"Sehbehinderung",lowVisionDescription:"Dieser Modus optimiert die Website für Benutzer mit Sehbeeinträchtigungen wie eingeschränktem Sehvermögen, Tunnelblick, Katarakt, Glaukom und weiteren visuellen Einschränkungen.",cognitiveDisabilityMode:"Modus für kognitive Beeinträchtigungen",cognitiveDisabilityTitle:"Kognitive Beeinträchtigungen",cognitiveDisabilityDescription:"Dieser Modus stellt verschiedene Unterstützungsmöglichkeiten bereit, die es Benutzern mit kognitiven Beeinträchtigungen wie Legasthenie, Autismus, Schlaganfallfolgen und anderen erleichtern, sich auf die wesentlichen Elemente der Website zu konzentrieren.",adhdFriendly:"Lesbarkeit bei ADHS",adhdFriendlyTitle:"ADHS",adhdFriendlyDescription:"Dieser Modus unterstützt Benutzer mit ADHS und neurologischen Entwicklungsstörungen, indem er die Hauptinhalte der Website leichter lesbar, durchsuchbar und fokussierbar macht, während Ablenkungen deutlich minimiert werden.",contentScaling:"Inhaltsgröße",standard:"Standard",magnifier:"Lupe",easyText:"Leichte Sprache",easySpeak:"Leichte Sprache vorlesen",textToSpeech:"Vorlesemodus",languageChoice:"Stimmauswahl",darkContrast:"Dunkler Kontrast",lightContrast:"Heller Kontrast",readableFont:"Lesbare Schriftart",dyslexiaFont:"Unterstützung für Legasthenie",fontSizing:"Schriftgröße",lineHeight:"Zeilenhöhe",letterSpacing:"Buchstabenabstand",alignLeft:"Links",alignCenter:"Mittig",alignRight:"Rechts",monochrome:"Monochrome",highContrast:"Hoher Kontrast",highSaturation:"Hohe Sättigung",lowSaturation:"Niedrige Sättigung",mute:"Stummschalten",hideImages:"Bilder verbergen",virtualKeyboard:"Virtuelle Tastatur",readingGuide:"Lesemarke",stopAnimations:"Animationen stoppen",readingMask:"Lesemaske",highlightHover:"Hover markieren",highlightTitles:"Überschriften hervorheben",highlightLinks:"Links hervorheben",highlightFocus:"Focus hervorheben",bigBlackCursor:"Grosser Cursor dunkel",bigWhiteCursor:"Grosser Cursor hell",cognitiveReading:"Kognitives Lesen",keyboardNavigation:"Navitasten",voiceNavigation:"Sprachnavi",textColors:"Farbanpassung Text",titleColors:"Farbanpassung Überschriften",backgroundColors:"Farbanpassung Hintergrund",linkNavigator:"Link Navigator",pleaseChoose:"bitte auswählen",reset:"Zurücksetzen",close:"Schliessen"},en:{closeAccessibility:"Close Accessibility",specialModes:"Special Modes for Impairments",epilepsyMode:"Mode for Epileptic Users",epilepsySafety:"Epilepsy Safety",epilepsyDescription:"This mode enables people with epilepsy to use the website safely by eliminating the risk of seizures caused by flashing animations and unfavorable color combinations.",lowVision:"Low Vision",lowVisionDescription:"This mode optimizes the website for users with visual impairments such as reduced vision, tunnel vision, cataracts, glaucoma, and other visual conditions.",cognitiveDisabilityMode:"Mode for Cognitive Impairments",cognitiveDisabilityTitle:"Cognitive Impairments",cognitiveDisabilityDescription:"This mode provides various support options that help users with cognitive impairments such as dyslexia, autism, stroke effects, and others to focus on the essential elements of the website.",adhdFriendly:"ADHD-Friendly Readability",adhdFriendlyTitle:"ADHD",adhdFriendlyDescription:"This mode assists users with ADHD and neurological developmental disorders by making the main content of the website easier to read, search, and focus on, while significantly reducing distractions.",contentScaling:"Content Scaling",standard:"Standard",magnifier:"Magnifier",easyText:"Simple Language",easySpeak:"Read Simple Language Aloud",textToSpeech:"Text-to-Speech Mode",languageChoice:"Voice Selection",darkContrast:"Dark Contrast",lightContrast:"Light Contrast",readableFont:"Readable Font",dyslexiaFont:"Dyslexia Support",fontSizing:"Font Size",lineHeight:"Line Height",letterSpacing:"Letter Spacing",alignLeft:"Left",alignCenter:"Center",alignRight:"Right",monochrome:"Monochrome",highContrast:"High Contrast",highSaturation:"High Saturation",lowSaturation:"Low Saturation",mute:"Mute",hideImages:"Hide Images",virtualKeyboard:"Virtual Keyboard",readingGuide:"Reading Guide",stopAnimations:"Stop Animations",readingMask:"Reading Mask",highlightHover:"Highlight Hover",highlightTitles:"Highlight Headings",highlightLinks:"Highlight Links",highlightFocus:"Highlight Focus",bigBlackCursor:"Large Dark Cursor",bigWhiteCursor:"Large Light Cursor",cognitiveReading:"Cognitive Reading",keyboardNavigation:"Keyboard Navigation",voiceNavigation:"Voice Navigation",textColors:"Adjust Text Colors",titleColors:"Adjust Heading Colors",backgroundColors:"Adjust Background Colors",linkNavigator:"Link Navigator",pleaseChoose:"Please Choose",reset:"Reset",close:"Close"},it:{closeAccessibility:"Chiudi Accessibilità",specialModes:"Modalità Speciali per Disabilità",epilepsyMode:"Modalità per Epilettici",epilepsySafety:"Sicurezza Epilessia",epilepsyDescription:"Questa modalità consente alle persone con epilessia di utilizzare il sito in sicurezza, eliminando il rischio di crisi causate da animazioni lampeggianti e combinazioni di colori sfavorevoli.",lowVision:"Ipovisione",lowVisionDescription:"Questa modalità ottimizza il sito per utenti con disabilità visive come visione ridotta, visione a tunnel, cataratta, glaucoma e altre condizioni visive.",cognitiveDisabilityMode:"Modalità per Disabilità Cognitive",cognitiveDisabilityTitle:"Disabilità Cognitive",cognitiveDisabilityDescription:"Questa modalità fornisce varie opzioni di supporto che aiutano gli utenti con disabilità cognitive, come dislessia, autismo, conseguenze di ictus e altre difficoltà, a concentrarsi sugli elementi essenziali del sito.",adhdFriendly:"Leggibilità per ADHD",adhdFriendlyTitle:"ADHD",adhdFriendlyDescription:"Questa modalità aiuta gli utenti con ADHD e disturbi dello sviluppo neurologico rendendo il contenuto principale del sito più leggibile, ricercabile e focalizzabile, riducendo significativamente le distrazioni.",contentScaling:"Ridimensionamento Contenuti",standard:"Standard",magnifier:"Lente d'Ingrandimento",easyText:"Linguaggio Semplice",easySpeak:"Leggi il Linguaggio Semplice",textToSpeech:"Modalità Lettura Vocale",languageChoice:"Selezione della Voce",darkContrast:"Contrasto Scuro",lightContrast:"Contrasto Chiaro",readableFont:"Carattere Leggibile",dyslexiaFont:"Supporto per Dislessia",fontSizing:"Dimensione del Carattere",lineHeight:"Altezza della Riga",letterSpacing:"Spaziatura Lettere",alignLeft:"Sinistra",alignCenter:"Centro",alignRight:"Destra",monochrome:"Monocromatico",highContrast:"Alto Contrasto",highSaturation:"Alta Saturazione",lowSaturation:"Bassa Saturazione",mute:"Disattiva Audio",hideImages:"Nascondi Immagini",virtualKeyboard:"Tastiera Virtuale",readingGuide:"Guida alla Lettura",stopAnimations:"Ferma Animazioni",readingMask:"Maschera di Lettura",highlightHover:"Evidenzia al Passaggio",highlightTitles:"Evidenzia Titoli",highlightLinks:"Evidenzia Link",highlightFocus:"Evidenzia Focus",bigBlackCursor:"Cursore Grande Scuro",bigWhiteCursor:"Cursore Grande Chiaro",cognitiveReading:"Lettura Cognitiva",keyboardNavigation:"Navigazione da Tastiera",voiceNavigation:"Navigazione Vocale",textColors:"Regola Colori Testo",titleColors:"Regola Colori Titoli",backgroundColors:"Regola Colori Sfondo",linkNavigator:"Navigatore di Link",pleaseChoose:"Si prega di Scegliere",reset:"Ripristina",close:"Chiudi"},fr:{closeAccessibility:"Fermer l'accessibilité",specialModes:"Modes spéciaux pour les handicaps",epilepsyMode:"Mode pour les épileptiques",epilepsySafety:"Sécurité épilepsie",epilepsyDescription:"Ce mode permet aux personnes épileptiques d'utiliser le site en toute sécurité en éliminant le risque de crises causées par des animations clignotantes et des combinaisons de couleurs défavorables.",lowVision:"Basse vision",lowVisionDescription:"Ce mode optimise le site pour les utilisateurs ayant une déficience visuelle, comme une vision réduite, une vision en tunnel, la cataracte, le glaucome et d'autres troubles visuels.",cognitiveDisabilityMode:"Mode pour les troubles cognitifs",cognitiveDisabilityTitle:"Troubles cognitifs",cognitiveDisabilityDescription:"Ce mode offre diverses options d'assistance qui aident les utilisateurs ayant des troubles cognitifs, tels que la dyslexie, l'autisme, les séquelles d'un AVC et d'autres, à se concentrer sur les éléments essentiels du site.",adhdFriendly:"Lisibilité adaptée au TDAH",adhdFriendlyTitle:"TDAH",adhdFriendlyDescription:"Ce mode aide les utilisateurs atteints de TDAH et de troubles du développement neurologique en rendant le contenu principal du site plus lisible, plus facile à rechercher et à mettre en avant, tout en réduisant significativement les distractions.",contentScaling:"Ajustement du contenu",standard:"Standard",magnifier:"Loupe",easyText:"Langage simplifié",easySpeak:"Lire le langage simplifié",textToSpeech:"Mode de lecture vocale",languageChoice:"Sélection de la voix",darkContrast:"Contraste sombre",lightContrast:"Contraste clair",readableFont:"Police lisible",dyslexiaFont:"Assistance à la dyslexie",fontSizing:"Taille de la police",lineHeight:"Hauteur de ligne",letterSpacing:"Espacement des lettres",alignLeft:"Gauche",alignCenter:"Centre",alignRight:"Droite",monochrome:"Monochrome",highContrast:"Contraste élevé",highSaturation:"Saturation élevée",lowSaturation:"Saturation faible",mute:"Muet",hideImages:"Masquer les images",virtualKeyboard:"Clavier virtuel",readingGuide:"Guide de lecture",stopAnimations:"Arrêter les animations",readingMask:"Masque de lecture",highlightHover:"Surligner au survol",highlightTitles:"Surligner les titres",highlightLinks:"Surligner les liens",highlightFocus:"Surligner le focus",bigBlackCursor:"Grand curseur noir",bigWhiteCursor:"Grand curseur blanc",cognitiveReading:"Lecture cognitive",keyboardNavigation:"Navigation au clavier",voiceNavigation:"Navigation vocale",textColors:"Ajuster les couleurs du texte",titleColors:"Ajuster les couleurs des titres",backgroundColors:"Ajuster les couleurs de fond",linkNavigator:"Navigateur de liens",pleaseChoose:"Veuillez choisir",reset:"Réinitialiser",close:"Fermer"}},userLang=document.documentElement.lang.split("-")[0];function divHasOnlyText(div){return"DIV"!==div.nodeName||Array.from(div.childNodes).every((node=>node.nodeType===Node.TEXT_NODE||"A"===node.nodeName))}const scripts=document.getElementsByTagName("script"),currentScript=Array.from(scripts).find((script=>script.src.includes("fixstern.js"))),pathSegments=new URL(document.currentScript.src).pathname.split("/"),ulid=pathSegments[pathSegments.length-2];let pos=null,nobutton=null,valX=null,valY=null;if(currentScript){const queryParams=new URLSearchParams(currentScript.src.split("?")[1]);pos=queryParams.get("pos"),"tl"!=pos&&"tr"!=pos&&"bl"!=pos&&"br"!=pos&&(pos=null),valX=queryParams.get("valX"),valY=queryParams.get("valY"),nobutton=queryParams.get("nobutton"),"true"!=nobutton&&"false"!=nobutton&&(nobutton=null)}const hostElement=document.createElement("div"),appUrl="https://aktion-barrierefrei.org/assets/css",logoSrc=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?appUrl+"/svgs/fixstern-logo-light.svg":appUrl+"/svgs/fixstern-logo.svg";hostElement.innerHTML=function(widgetHtml){const langData=translations[userLang]||translations.de;return widgetHtml.replace(/\{\{(.*?)\}\}/g,((_,key)=>langData[key]||`{{${key}}}`))}('\n   <div class="ini-bf-modal-animation-fade ini-bf-modal-fixed"id=ini-bf-panel-box aria-hidden=true data-nosnippet style=display:none><div id=ini-bf-panel role=dialog aria-labelledby=ini-bf-panel-box aria-modal=true data-start=right><section id=ini-bf-panel-header><h3><a href=https://aktion-barrierefrei.org/tools/fixstern style=text-decoration:none;cursor:pointer!important target=_blank><img alt="aktion-barrierefrei logo"src="'+logoSrc+'"style=height:45px;margin-left:12px;margin-bottom:8px;cursor:pointer!important></a></h3><button aria-label={{closeAccessibility}} id=ini-bf-panel-close></button></section><section id=ini-bf-panel-main><div class=ini-bf-subheader>{{specialModes}}</div><div id=ini-bf-accessibility-profiles-box><div class=ini-bf-accessibility-profile-item id=ini-bf-accessibility-profile-epilepsy role=button tabindex=0><div class=ini-bf-row><div class=ini-bf-choose-profile><label class=ini-bf-choose-profile-label><span data-i18next=profile:epilepsy-title>{{epilepsyMode}}</span> <input name=ini-bf-accessibility-profile-epilepsy tabindex=-1 type=checkbox value=on> <span class=ini-bf-slider></span></label></div><div class=ini-bf-title-box><div class=ini-bf-profile-title data-i18next=profile:epilepsy-title>{{epilepsySafety}}</div></div></div><div class=ini-bf-profile-description data-i18next=profile:epilepsy-description>{{epilepsyDescription}}</div></div><div class=ini-bf-accessibility-profile-item id=ini-bf-accessibility-profile-visually-impaired role=button tabindex=0><div class=ini-bf-row><div class=ini-bf-choose-profile><label class=ini-bf-choose-profile-label><span data-i18next=profile:visually-impaired-title>{{lowVision}}</span> <input name=ini-bf-accessibility-profile-visually-impaired tabindex=-1 type=checkbox value=on> <span class=ini-bf-slider></span></label></div><div class=ini-bf-title-box><div class=ini-bf-profile-title data-i18next=profile:visually-impaired-title>{{lowVision}}</div></div></div><div class=ini-bf-profile-description data-i18next=profile:visually-impaired-description>{{lowVisionDescription}}</div></div><div class=ini-bf-accessibility-profile-item id=ini-bf-accessibility-profile-cognitive-disability role=button tabindex=0><div class=ini-bf-row><div class=ini-bf-choose-profile><label class=ini-bf-choose-profile-label><span data-i18next=profile:cognitive-disability-title>{{cognitiveDisabilityMode}}</span> <input name=ini-bf-accessibility-profile-cognitive-disability tabindex=-1 type=checkbox value=on> <span class=ini-bf-slider></span></label></div><div class=ini-bf-title-box><div class=ini-bf-profile-title data-i18next=profile:cognitive-disability-title>{{cognitiveDisabilityTitle}}</div></div></div><div class=ini-bf-profile-description data-i18next=profile:cognitive-disability-description>{{cognitiveDisabilityDescription}}</div></div><div class=ini-bf-accessibility-profile-item id=ini-bf-accessibility-profile-adhd-friendly role=button tabindex=0><div class=ini-bf-row><div class=ini-bf-choose-profile><label class=ini-bf-choose-profile-label><span data-i18next=profile:adhd-friendly-title>{{adhdFriendly}}</span> <input name=ini-bf-accessibility-profile-adhd-friendly tabindex=-1 type=checkbox value=on> <span class=ini-bf-slider></span></label></div><div class=ini-bf-title-box><div class=ini-bf-profile-title data-i18next=profile:adhd-friendly-title>{{adhdFriendlyTitle}}</div></div></div><div class=ini-bf-profile-description data-i18next=profile:adhd-friendly-description>{{adhdFriendlyDescription}}</div></div></div><div class=ini-bf-subheader></div><div id=ini-bf-readable-experience-box><div class="ini-bf-action-box ini-bf-adjustable"id=ini-bf-action-content-scaling><div class=ini-bf-action-box-content><span class=ini-bf-title>{{contentScaling}}</span></div><div class=ini-bf-adjustable-input data-step=5><div class=ini-bf-control><button aria-label="Increase Content Size"class=ini-bf-plus tabindex=0></button><div class=ini-bf-value data-value=0>{{standard}}</div><button aria-label="Decrease Content Size"class=ini-bf-minus tabindex=0></button></div></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-magnifier role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{magnifier}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-eztext role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{easyText}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box-speach"id=ini-bf-action-ezspeak role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{easySpeak}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box-speach"id=ini-bf-action-tts role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{textToSpeech}}</span></div></div><div class="ini-bf-action-box ini-bf-langchoice-box"id=ini-bf-action-langchoice><div class=ini-bf-action-box-content><label class=ini-bf-title for=ini-bf-langchoice>{{languageChoice}}</label><div class=ini-bf-select-box><select aria-label="Voices for tts"autocomplete=on id=ini-bf-langchoice></select></div></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-dark-contrast role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{darkContrast}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-light-contrast role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{lightContrast}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-readable-font role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{readableFont}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-dyslexia-font role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{dyslexiaFont}}</span></div></div><div class="ini-bf-action-box ini-bf-adjustable"id=ini-bf-action-font-sizing><div class=ini-bf-action-box-content><span class=ini-bf-title>{{fontSizing}}</span></div><div class=ini-bf-adjustable-input data-step=5><div class=ini-bf-control><button aria-label=Vergrößern class=ini-bf-plus tabindex=0></button><div class=ini-bf-value data-value=0>{{standard}}</div><button aria-label=Verringern class=ini-bf-minus tabindex=0></button></div></div></div><div class="ini-bf-action-box ini-bf-adjustable"id=ini-bf-action-line-height><div class=ini-bf-action-box-content><span class=ini-bf-title>{{lineHeight}}</span></div><div class=ini-bf-adjustable-input data-step=5><div class=ini-bf-control><button aria-label=Vergrößern class=ini-bf-plus tabindex=0></button><div class=ini-bf-value data-value=0>{{standard}}</div><button aria-label=Verringern class=ini-bf-minus tabindex=0></button></div></div></div><div class="ini-bf-action-box ini-bf-adjustable"id=ini-bf-action-letter-spacing><div class=ini-bf-action-box-content><span class=ini-bf-title>{{letterSpacing}}</span></div><div class=ini-bf-adjustable-input data-step=5><div class=ini-bf-control><button aria-label=Vergrößern class=ini-bf-plus tabindex=0></button><div class=ini-bf-value data-value=0>{{standard}}</div><button aria-label=Verringern class=ini-bf-minus tabindex=0></button></div></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-align-left role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title data-i18next=align-left>{{alignLeft}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-align-center role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title data-i18next=align-center>{{alignCenter}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-align-right role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title data-i18next=align-right>{{alignRight}}</span></div></div></div><div class=ini-bf-subheader></div><div id=ini-bf-visual-adjustment-section><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-monochrome role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{monochrome}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-high-contrast role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{highContrast}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-high-saturation role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{highSaturation}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-low-saturation role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{lowSaturation}}</span></div></div></div><div class=ini-bf-subheader></div><div id=ini-bf-easy-orientation-box><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-mute-sounds role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{mute}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-hide-images role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{hideImages}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-virtual-keyboard role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{virtualKeyboard}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-reading-guide role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{readingGuide}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-stop-animations role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{stopAnimations}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-reading-mask role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{readingMask}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-highlight-hover role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{highlightHover}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-highlight-titles role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{highlightTitles}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-highlight-links role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{highlightLinks}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-highlight-focus role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{highlightFocus}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-big-black-cursor role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{bigBlackCursor}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-big-white-cursor role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{bigWhiteCursor}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-cognitive-reading role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{cognitiveReading}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-keyboard-navigation role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{keyboardNavigation}}</span></div></div><div class="ini-bf-action-box ini-bf-switch-box"id=ini-bf-action-voice-navigation role=button tabindex=0><div class=ini-bf-action-box-content><span class=ini-bf-icon></span> <span class=ini-bf-title>{{voiceNavigation}}</span></div></div><div class="ini-bf-action-box ini-bf-palette-box"id=ini-bf-action-text-colors><div class=ini-bf-action-box-content><span class=ini-bf-title>{{textColors}}</span><div class=ini-bf-color-box><span class=ini-bf-color aria-label="Change Color to Maroon"data-color=maroon role=button style=background-color:maroon!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Red"data-color=red role=button style=background-color:red!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Orange"data-color=orange role=button style=background-color:orange!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Yellow"data-color=yellow role=button style=background-color:#ff0!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Olive"data-color=olive role=button style=background-color:olive!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Green"data-color=green role=button style=background-color:green!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Purple"data-color=purple role=button style=background-color:purple!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Fuchsia"data-color=fuchsia role=button style=background-color:#f0f!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Lime"data-color=lime role=button style=background-color:#0f0!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Teal"data-color=teal role=button style=background-color:teal!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Aqua"data-color=aqua role=button style=background-color:#0ff!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Blue"data-color=blue role=button style=background-color:#00f!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Navy"data-color=navy role=button style=background-color:navy!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Black"data-color=black role=button style=background-color:#000!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to White"data-color=white role=button style=background-color:#fff!important tabindex=0></span></div></div></div><div class="ini-bf-action-box ini-bf-palette-box"id=ini-bf-action-title-colors><div class=ini-bf-action-box-content><span class=ini-bf-title>{{titleColors}}</span><div class=ini-bf-color-box><span class=ini-bf-color aria-label="Change Color to Maroon"data-color=maroon role=button style=background-color:maroon!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Red"data-color=red role=button style=background-color:red!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Orange"data-color=orange role=button style=background-color:orange!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Yellow"data-color=yellow role=button style=background-color:#ff0!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Olive"data-color=olive role=button style=background-color:olive!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Green"data-color=green role=button style=background-color:green!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Purple"data-color=purple role=button style=background-color:purple!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Fuchsia"data-color=fuchsia role=button style=background-color:#f0f!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Lime"data-color=lime role=button style=background-color:#0f0!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Teal"data-color=teal role=button style=background-color:teal!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Aqua"data-color=aqua role=button style=background-color:#0ff!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Blue"data-color=blue role=button style=background-color:#00f!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Navy"data-color=navy role=button style=background-color:navy!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Black"data-color=black role=button style=background-color:#000!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to White"data-color=white role=button style=background-color:#fff!important tabindex=0></span></div></div></div><div class="ini-bf-action-box ini-bf-palette-box"id=ini-bf-action-background-colors><div class=ini-bf-action-box-content><span class=ini-bf-title>{{backgroundColors}}</span><div class=ini-bf-color-box><span class=ini-bf-color aria-label="Change Color to Maroon"data-color=maroon role=button style=background-color:maroon!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Red"data-color=red role=button style=background-color:red!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Orange"data-color=orange role=button style=background-color:orange!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Yellow"data-color=yellow role=button style=background-color:#ff0!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Olive"data-color=olive role=button style=background-color:olive!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Green"data-color=green role=button style=background-color:green!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Purple"data-color=purple role=button style=background-color:purple!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Fuchsia"data-color=fuchsia role=button style=background-color:#f0f!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Lime"data-color=lime role=button style=background-color:#0f0!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Teal"data-color=teal role=button style=background-color:teal!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Aqua"data-color=aqua role=button style=background-color:#0ff!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Blue"data-color=blue role=button style=background-color:#00f!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Navy"data-color=navy role=button style=background-color:navy!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to Black"data-color=black role=button style=background-color:#000!important tabindex=0></span> <span class=ini-bf-color aria-label="Change Color to White"data-color=white role=button style=background-color:#fff!important tabindex=0></span></div></div></div><div class="ini-bf-action-box ini-bf-linknav-box"id=ini-bf-action-linknav><div class=ini-bf-action-box-content><label class=ini-bf-title for=ini-bf-linknav>{{linkNavigator}}</label><div class=ini-bf-select-box><select aria-label="Useful Links"autocomplete=on id=ini-bf-linknav><option disabled selected value="">{{pleaseChoose}}</select></div></div></div></div></section><div id=ini-bf-panel-footer><button aria-label="Reset Settings"id=ini-bf-reset-btn><span>{{reset}}</span></button> <button aria-label="Hide Forever"id=ini-bf-hide-btn><span>{{close}}</span></button></div></div></div>\n    '),document.body.appendChild(hostElement.firstElementChild);const keyboardBox=document.createElement("div");keyboardBox.innerHTML='\n\n    <div id="ini-bf-keyboard-box"> <div class="simple-keyboard"></div> </div>\n    ',document.body.appendChild(keyboardBox.firstElementChild);const triggerButton=document.createElement("div");if(triggerButton.innerHTML='\n    <div class="ini-bf-trigger-button-box bottom-left ini-bf-initfade" data-nosnippet> <button tabindex=0 id="ini-bf-trigger-button" class="ini-bf-icon-position-before" aria-label="Barrierefreiheit Öffnen" title="Accessibility" data-bf-ini-trigger=""> <span class="ini-bf-trigger-button-icon"><svg height="100%" viewBox="0 0 800 800" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="Ebene1"></g><path d="M220.21,48.156c-29.675,15.345 -57.163,34.335 -81.864,56.37l-54.698,81.634l61.472,-29.077l48.037,83.129l7.77,-95.577l63.491,-21.566l-53.275,-39.094l9.067,-35.819c54.274,-28.063 115.892,-43.924 181.185,-43.924c218.224,0 395.394,177.171 395.394,395.395c0,135.954 -68.765,255.973 -173.374,327.14l2.944,15.762c0.411,1.807 0.753,3.669 1.04,5.558c3.259,22.178 -12.978,43.726 -43.808,43.726c-19.196,-0 -30.72,-9.48 -37.605,-24.106c27.436,-10.798 53.377,-24.577 77.429,-40.94l-41.727,-223.445l-7.926,-61.606c-5.737,-35.881 -1.123,-47.737 0.438,-50.516c0.041,-0.065 0.078,-0.134 0.109,-0.205c1.479,-2.738 8.214,-8.872 23.93,-14.772l122.225,-42.727c0.751,-0.2 1.491,-0.437 2.218,-0.712c21.904,-8.214 43.809,-19.576 43.809,-43.712c-0,-24.136 -17.784,-50.599 -43.795,-43.767l-0.616,0.164l-0.575,0.178c-1.369,0.383 -2.738,0.794 -4.107,1.218c-25.477,7.475 -149.126,42.33 -236.236,42.33c-80.95,0 -193.414,-30.118 -229.391,-40.344c-3.581,-1.385 -7.237,-2.564 -10.952,-3.533c-26.011,-6.845 -43.809,19.577 -43.809,43.727c0,23.916 21.494,35.306 43.193,43.479l-0,0.384l130.357,40.714c13.32,5.106 16.879,10.322 18.618,14.84c5.654,14.498 1.136,43.206 -0.465,53.227l-7.941,61.605l-44.068,241.206c-0.137,0.657 -0.26,1.328 -0.37,2.012l-0.314,1.739c-3.177,22.11 13.06,43.562 43.808,43.562c26.832,-0 38.674,-18.523 43.808,-43.726c5.134,-25.204 38.332,-215.715 57.498,-215.715c19.167,0 58.649,215.715 58.649,215.715c1.461,7.173 3.465,13.804 6.203,19.62c-44.794,17.63 -93.571,27.315 -144.591,27.315c-218.225,-0 -395.395,-177.171 -395.395,-395.395c0,-117.252 51.148,-222.652 132.346,-295.101l1.219,-1.82l-21.021,-79.83l46.145,38.943l66.981,-58.929l-11.46,45.266Zm261.54,196.054c-42.056,-0 -76.664,-34.608 -76.664,-76.665c-0,-42.057 34.608,-76.664 76.664,-76.664c42.057,-0 76.665,34.607 76.665,76.664c-0.045,42.04 -34.625,76.62 -76.665,76.665Z"/></svg></span> </button> </div>    \n    ',null!=pos&&null!=valX&&null!=valY&&(triggerButton.innerHTML='\n        <div id="ini-bf-trigger-button-box" class="ini-bf-trigger-button-box ini-bf-initfade" data-nosnippet> <button tabindex=0 id="ini-bf-trigger-button" class="ini-bf-icon-position-before" aria-label="Barrierefreiheit Öffnen" title="Accessibility" data-bf-ini-trigger=""> <span class="ini-bf-trigger-button-icon"><svg height="100%" viewBox="0 0 800 800" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;"><g id="Ebene1"></g><path d="M220.21,48.156c-29.675,15.345 -57.163,34.335 -81.864,56.37l-54.698,81.634l61.472,-29.077l48.037,83.129l7.77,-95.577l63.491,-21.566l-53.275,-39.094l9.067,-35.819c54.274,-28.063 115.892,-43.924 181.185,-43.924c218.224,0 395.394,177.171 395.394,395.395c0,135.954 -68.765,255.973 -173.374,327.14l2.944,15.762c0.411,1.807 0.753,3.669 1.04,5.558c3.259,22.178 -12.978,43.726 -43.808,43.726c-19.196,-0 -30.72,-9.48 -37.605,-24.106c27.436,-10.798 53.377,-24.577 77.429,-40.94l-41.727,-223.445l-7.926,-61.606c-5.737,-35.881 -1.123,-47.737 0.438,-50.516c0.041,-0.065 0.078,-0.134 0.109,-0.205c1.479,-2.738 8.214,-8.872 23.93,-14.772l122.225,-42.727c0.751,-0.2 1.491,-0.437 2.218,-0.712c21.904,-8.214 43.809,-19.576 43.809,-43.712c-0,-24.136 -17.784,-50.599 -43.795,-43.767l-0.616,0.164l-0.575,0.178c-1.369,0.383 -2.738,0.794 -4.107,1.218c-25.477,7.475 -149.126,42.33 -236.236,42.33c-80.95,0 -193.414,-30.118 -229.391,-40.344c-3.581,-1.385 -7.237,-2.564 -10.952,-3.533c-26.011,-6.845 -43.809,19.577 -43.809,43.727c0,23.916 21.494,35.306 43.193,43.479l-0,0.384l130.357,40.714c13.32,5.106 16.879,10.322 18.618,14.84c5.654,14.498 1.136,43.206 -0.465,53.227l-7.941,61.605l-44.068,241.206c-0.137,0.657 -0.26,1.328 -0.37,2.012l-0.314,1.739c-3.177,22.11 13.06,43.562 43.808,43.562c26.832,-0 38.674,-18.523 43.808,-43.726c5.134,-25.204 38.332,-215.715 57.498,-215.715c19.167,0 58.649,215.715 58.649,215.715c1.461,7.173 3.465,13.804 6.203,19.62c-44.794,17.63 -93.571,27.315 -144.591,27.315c-218.225,-0 -395.395,-177.171 -395.395,-395.395c0,-117.252 51.148,-222.652 132.346,-295.101l1.219,-1.82l-21.021,-79.83l46.145,38.943l66.981,-58.929l-11.46,45.266Zm261.54,196.054c-42.056,-0 -76.664,-34.608 -76.664,-76.665c-0,-42.057 34.608,-76.664 76.664,-76.664c42.057,-0 76.665,34.607 76.665,76.664c-0.045,42.04 -34.625,76.62 -76.665,76.665Z"/></svg></span> </button> </div>    \n        '),"true"!=nobutton){document.body.appendChild(triggerButton.firstElementChild);let trigbut=document.getElementById("ini-bf-trigger-button-box");if(null!=pos&&null!=valX&&null!=valY)switch(pos){case"tl":trigbut.style.top=valY,trigbut.style.left=valX;break;case"tr":trigbut.style.top=valY,trigbut.style.right=valX;break;case"bl":trigbut.style.bottom=valY,trigbut.style.left=valX;break;case"br":trigbut.style.bottom=valY,trigbut.style.right=valX}}["en","de","fr","it"].includes(document.documentElement.lang)&&document.documentElement.lang;let voicesList=[];window,document.getElementById("ini-bf-action-langchoice").style.display="none",document.getElementById("ini-bf-action-tts").style.display="none",document.getElementById("ini-bf-action-ezspeak").style.display="none";window.iniBfPreferences;const clickModiSpecificVisualSwitches=function(target){document.querySelectorAll("#ini-bf-visual-adjustment-section .ini-bf-switch-box.ini-bf-active").forEach((n=>{target.id!==n.id&&n.click()}))};function getConfStorage(itm){if(!window.iniBfPreferences.saveConfig||"off"===window.iniBfPreferences.saveConfig)return null;try{return localStorage.getItem("iniBfStore"+itm)}catch(e){return null}}function setConfStorage(key,val){if(!window.iniBfPreferences.saveConfig||"off"===window.iniBfPreferences.saveConfig)return!1;try{return localStorage.setItem("iniBfStore"+key,val)}catch(e){return!1}}let switchBox={init:function(){let n=document.querySelectorAll(".ini-bf-switch-box");n.forEach((e=>e.addEventListener("click",(e=>switchBox.toggle(e))))),n.forEach((e=>e.addEventListener("keydown",(e=>switchBox.toggle(e)))))},loadSettings:function(){document.querySelectorAll(".ini-bf-switch-box").forEach((e=>{"ini-bf-action-ezspeak"!=e.id&&"ini-bf-action-tts"!=e.id&&"true"===getConfStorage(e.id)&&e.click()}))},toggle:function(n){if("keydown"===n.type&&13!==n.keyCode)return;let m=n.target.closest(".ini-bf-switch-box");m.classList.toggle("ini-bf-active"),setConfStorage(m.id,m.classList.contains("ini-bf-active"));const e=new CustomEvent("iniBfTogglerChange",{});m.dispatchEvent(e)}};const adjustableFunctions={init:function(){let adj=document.querySelectorAll(".ini-bf-adjustable-input .ini-bf-plus");adj.forEach((e=>e.addEventListener("click",(e=>adjustableFunctions.step(e)))));let t,n=document.querySelectorAll(".ini-bf-adjustable-input .ini-bf-minus");n.forEach((e=>e.addEventListener("click",(e=>adjustableFunctions.step(e))))),adj.forEach((e=>e.addEventListener("mousedown",(e=>{t=setInterval((function(){adjustableFunctions.step(e)}),500)})))),adj.forEach((e=>e.addEventListener("mouseup",(()=>{clearInterval(t)})))),adj.forEach((e=>e.addEventListener("mouseleave",(()=>{clearInterval(t)})))),n.forEach((e=>e.addEventListener("mousedown",(e=>{t=setInterval((function(){adjustableFunctions.step(e)}),500)})))),n.forEach((e=>e.addEventListener("mouseup",(()=>{clearInterval(t)})))),n.forEach((e=>e.addEventListener("mouseleave",(()=>{clearInterval(t)}))))},step:function(e){let t=e.target.closest(".ini-bf-control").querySelector(".ini-bf-value"),n=parseInt(t.dataset.value),o=parseInt(e.target.closest(".ini-bf-adjustable-input").dataset.step);e.target.classList.contains("ini-bf-minus")?n-=o:n+=o,t.dataset.value=n.toString(),adjustableFunctions.setLabel(t,n),setConfStorage(e.target.closest(".ini-bf-action-box").id,t.dataset.value);const i=new CustomEvent("BfIniInSpinnerChanged",{});t.dispatchEvent(i)},setLabel:function(e,t){t=parseInt(t);window.iniBfPreferences;if(0===t)e.innerHTML="Standard";else{let n=t>0?"+":"";e.innerHTML=n+t+"%"}},loadSettings:function(){document.querySelectorAll(".ini-bf-adjustable").forEach((e=>{let t=getConfStorage(e.id);if(!t)return;if(t=parseInt(t),0===t)return;let n=e.querySelector(".ini-bf-value");n.dataset.value=t.toString(),adjustableFunctions.setLabel(n,t);const o=new CustomEvent("BfIniInSpinnerChanged",{detail:{load:!0}});n.dispatchEvent(o)}))}},colorPallettes={init:function(){let e=document.querySelectorAll(".ini-bf-palette-box");e.forEach((e=>e.addEventListener("click",(e=>colorPallettes.selectColor(e))))),e.forEach((e=>e.addEventListener("keydown",(e=>colorPallettes.selectColor(e)))))},selectColor:function(e){if("keydown"===e.type&&13!==e.keyCode)return;if(!e.target.classList.contains("ini-bf-color"))return;let t=e.target.closest(".ini-bf-palette-box");if(e.target.classList.contains("ini-bf-active"))e.target.classList.remove("ini-bf-active"),colorPallettes.firePaletteChange(t,null),setConfStorage(e.target.closest(".ini-bf-palette-box").id,null);else{let n=t.querySelector(".ini-bf-color.ini-bf-active");null!==n&&n.classList.remove("ini-bf-active"),e.target.classList.add("ini-bf-active"),colorPallettes.firePaletteChange(t,e.target.dataset.color),setConfStorage(e.target.closest(".ini-bf-palette-box").id,e.target.dataset.color)}},loadSettings:function(){document.querySelectorAll(".ini-bf-palette-box").forEach((e=>{let t=getConfStorage(e.id);null!==t&&e.querySelectorAll(".ini-bf-color").forEach((e=>{e.dataset.color===t&&e.click()}))}))},firePaletteChange:function(e,t){const n=new CustomEvent("iniBfColorPallChanged",{detail:{color:t}});e.dispatchEvent(n)}};function convertToArr(e){return input=e,(Array.isArray(input)?shallowCopy(input):null)||function(input){return"undefined"!=typeof Symbol&&Symbol.iterator in Object(input)?Array.from(input):null}(e)||function(input,limit){if(!input)return null;if("string"==typeof input)return shallowCopy(input,limit);let typeName=Object.prototype.toString.call(input).slice(8,-1);return"Object"===typeName&&input.constructor&&(typeName=input.constructor.name),"Map"===typeName||"Set"===typeName?Array.from(input):"Arguments"===typeName||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(typeName)?shallowCopy(input,limit):null}(e)||[];var input}function shallowCopy(array,count){(null==count||count>array.length)&&(count=array.length);const res=new Array(count);for(let index=0;index<count;index++)res[index]=array[index];return res}var trgrs,focusableAndInteractiveSelectors,ttrgrs,warn1,warn2,micModal=(focusableAndInteractiveSelectors=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],trgrs=(()=>{function initializeModalController(config){const{targetModal:targetModal,triggers:triggers=[],onShow:onShow=(()=>{}),onClose:onClose=(()=>{}),openTrigger:openTrigger="data-micromodal-trigger",closeTrigger:closeTrigger="data-micromodal-close",openClass:openClass="is-open",disableScroll:disableScroll=!1,disableFocus:disableFocus=!1,awaitCloseAnimation:awaitCloseAnimation=!1,awaitOpenAnimation:awaitOpenAnimation=!1,debugMode:debugMode=!1}=config;if(!(this instanceof initializeModalController))throw new TypeError("Cannot call a class as a function");this.modal=document.getElementById(targetModal),this.config={debugMode:debugMode,disableScroll:disableScroll,openTrigger:openTrigger,closeTrigger:closeTrigger,openClass:openClass,onShow:onShow,onClose:onClose,awaitCloseAnimation:awaitCloseAnimation,awaitOpenAnimation:awaitOpenAnimation,disableFocus:disableFocus},triggers.length>0&&this.registerTriggers(...convertToArr(triggers)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var n;return(n=[{key:"registerTriggers",value:function(){for(var e=this,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];n.filter(Boolean).forEach((function(t){t.addEventListener("click",(function(t){return e.showModal(t)}))}))}},{key:"showModal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation?this.modal.addEventListener("animationend",(function t(){e.modal.removeEventListener("animationend",t,!1),e.setFocusToFirstNode()}),!1):this.setFocusToFirstNode(),this.config.onShow(this.modal,this.activeElement,t)}},{key:"closeModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,e),this.config.awaitCloseAnimation){var n=this.config.openClass;this.modal.addEventListener("animationend",(function e(){t.classList.remove(n),t.removeEventListener("animationend",e,!1)}),!1)}else t.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(e){this.modal=document.getElementById(e),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(e){if(this.config.disableScroll){var t=document.querySelector("body");switch(e){case"enable":Object.assign(t.style,{overflow:""});break;case"disable":Object.assign(t.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal&&(this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick)),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){(e.target.hasAttribute(this.config.closeTrigger)||e.target.parentNode.hasAttribute(this.config.closeTrigger))&&(e.preventDefault(),e.stopPropagation(),this.closeModal(e))}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.retainFocus(e)}},{key:"getFocusableNodes",value:function(){var e=this.modal.querySelectorAll(focusableAndInteractiveSelectors);return Array.apply(void 0,convertToArr(e))}},{key:"setFocusToFirstNode",value:function(){var e=this;if(!this.config.disableFocus){var t=this.getFocusableNodes();if(0!==t.length){var n=t.filter((function(t){return!t.hasAttribute(e.config.closeTrigger)}));n.length>0&&n[0].focus(),0===n.length&&t[0].focus()}}}},{key:"retainFocus",value:function(e){var t=this.getFocusableNodes();if(0!==t.length)if(t=t.filter((function(e){return null!==e.offsetParent})),this.modal.contains(document.activeElement)){var n=t.indexOf(document.activeElement);e.shiftKey&&0===n&&(t[t.length-1].focus(),e.preventDefault()),!e.shiftKey&&t.length>0&&n===t.length-1&&(t[0].focus(),e.preventDefault())}else t[0].focus()}}])&&function(e,t){for(const descriptor of t)descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(e,descriptor.key,descriptor)}(initializeModalController.prototype,n),initializeModalController})(),ttrgrs=null,warn1=function(e){if(!document.getElementById(e))return console.warn("MicroModal: ❗Seems like you have missed %c'".concat(e,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(e,'"></div>')),!1},warn2=function(e,t){if(function(e){alert("hier"),e.length<=0&&(console.warn("MicroModal: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(e),!t)return!0;for(var n in t)warn1(n);return!0},{init:function(e){var t=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),n=convertToArr(document.querySelectorAll("[".concat(t.openTrigger,"]"))),o=function(e,t){var n=[];return e.forEach((function(e){var o=e.attributes[t].value;void 0===n[o]&&(n[o]=[]),n[o].push(e)})),n}(n,t.openTrigger);if(!0!==t.debugMode||!1!==warn2(n,o))for(var i in o){var a=o[i];t.targetModal=i,t.triggers=convertToArr(a),ttrgrs=new trgrs(t)}},show:function(e,t){var n=t||{};n.targetModal=e,!0===n.debugMode&&!1===warn1(e)||(ttrgrs&&ttrgrs.removeEventListeners(),(ttrgrs=new trgrs(n)).showModal())},close:function(e){e?ttrgrs.closeModalById(e):ttrgrs.closeModal()}});"undefined"!=typeof window&&(window.MicroModal=micModal);const q=micModal;function updateVoiceNavigationInputDisplay(e="",t=""){const n=document.querySelector("#ini-bf-voice-navigation-input");n&&(n.value=e,n.placeholder=t,window.iniBfSpeechReconTimestamp=Date.now())}function voiceNavHistory(e=""){const t=document.querySelector("#ini-bf-voice-navigation-history");t&&(t.value=e)}const speechSynthUtternce=new SpeechSynthesisUtterance;function handleVoiceNavigationFeedback(inputText){(async function(text){const speechSynth=window.speechSynthesis;cancelSpeechSynth();try{0===speechSynth.getVoices().length&&await new Promise(((resolve,reject)=>{speechSynth.onvoiceschanged=()=>{resolve();try{!function(){const synth=window.speechSynthesis,docLang=["en","de","fr","it"].includes(document.documentElement.lang)?document.documentElement.lang:"de",matchingVoice=synth.getVoices().find((voice=>voice.lang===docLang));if(matchingVoice)speechSynthUtternce.voice=matchingVoice,speechSynthUtternce.lang=docLang;else{const partialMatchVoice=synth.getVoices().find((voice=>voice.lang.startsWith(docLang)));partialMatchVoice?(speechSynthUtternce.voice=partialMatchVoice,speechSynthUtternce.lang=speechSynthUtternce.voice.lang):(speechSynthUtternce.voice=synth.getVoices().find((voice=>voice.lang.startsWith("en-GB"))),speechSynthUtternce.lang=speechSynthUtternce.voice.lang)}}()}catch(error){return console.warn("SpeechSynthesisUtterance not supported in your browser"),console.warn(error),!1}}}))}catch(error){return console.warn("SpeechSynthesisUtterance not supported in your browser"),console.warn(error),!1}})().then()}function cancelSpeechSynth(){window.speechSynthesis.cancel()}const U=window.iniBfPreferences;class P{constructor(){const e=this.setRecognitionProperties();return e?(window.iniBfSpeechRecon=!1,window.iniBfVoiceNav=e,this.addRecognitionEvents(e),!0):(console.warn("Speech recognition is not supported in your browser"),!1)}setRecognitionProperties(){let e=null;if("SpeechRecognition"in window)e=new SpeechRecognition;else{if(!("webkitSpeechRecognition"in window))return console.warn("Recognition is not supported"),e;e=new webkitSpeechRecognition}return e.lang=this.getPageLang(),e.continuous=!0,e.interimResults=!0,e.maxAlternatives=0,e}addRecognitionEvents(e){window.iniBfSpeechReconTimestamp=Date.now(),e.addEventListener("start",this.eventRecognitionStart),e.addEventListener("end",this.eventRecognitionEnd),e.addEventListener("result",(e=>{if(Date.now()-window.iniBfSpeechReconTimestamp<2500)return;const{resultIndex:t}=e;let{transcript:n}=e.results[t][0];if(""===n)return;n=n.trim();const o=document.querySelector("#ini-bf-voice-navigation-input");o&&(o.value=n);let i=this.recognizeCommand(n);if(!i)return;window.iniBfSpeechReconTimestamp=Date.now();const a=new CustomEvent("iniBfVoiceNaviAction",{detail:{command:n,commandGroup:i.commandKey,number:i.number??!1}});window.dispatchEvent(a)})),e.addEventListener("error",this.eventRecognitionError)}static setBodyClass(e){document.body.classList.forEach((e=>{e.includes("ini-bf-recognition-")&&document.body.classList.remove(e)})),document.body.classList.add(`ini-bf-recognition-${e}`)}static manageRecognition(e=!1){if(!window.iniBfVoiceNav)return;const t=window.iniBfSpeechRecon??!1;e&&!t?(window.iniBfVoiceNav.start(),updateVoiceNavigationInputDisplay("",U.translation.voiceNavigationStart),voiceNavHistory("")):(window.iniBfVoiceNav.stop(),updateVoiceNavigationInputDisplay("",U.translation.voiceNavigationEnd),window.dispatchEvent(new Event("IniBfStopVoiceVisualization")))}eventRecognitionStart(){window.iniBfSpeechRecon=!0,handleVoiceNavigationFeedback(U.voiceNavigationFeedbackStart[Math.floor(Math.random()*U.voiceNavigationFeedbackStart.length)]),P.setBodyClass("running");const e=document.querySelector("#ini-bf-voice-navigation-record-button");e&&e.removeAttribute("disabled"),updateVoiceNavigationInputDisplay("",U.translation.voiceNavigationStart);const t=new CustomEvent("IniBfRecognitionStart");window.dispatchEvent(t)}eventRecognitionEnd(){if(window.iniBfSpeechRecon=!1,handleVoiceNavigationFeedback(U.voiceNavigationFeedbackEnd[Math.floor(Math.random()*U.voiceNavigationFeedbackEnd.length)]),document.body.classList.contains("ini-bf-recognition-error"))return;P.setBodyClass("paused"),updateVoiceNavigationInputDisplay("",U.translation.voiceNavigationEnd),window.dispatchEvent(new Event("iniBfStopVoiceVisualization"));const e=new CustomEvent("IniBfEndSpeechRecognition");window.dispatchEvent(e)}eventRecognitionError(e){window.iniBfSpeechRecon=!1;const{translation:t,voiceNavigationRerun:n}=U;if(P.setBodyClass("error"),"no-speech"===e.error){const e=t.voiceNavigationErrorNoVoice.split(". ");handleVoiceNavigationFeedback(t.voiceNavigationErrorNoVoice),updateVoiceNavigationInputDisplay("",e[0]),voiceNavHistory(e[1]??""),"on"===n&&setTimeout((()=>{window.iniBfVoiceNav.start()}),1e3)}else if("network"===e.error){const e=t.voiceNavigationErrorNoNetwork.split(". ");handleVoiceNavigationFeedback(t.voiceNavigationErrorNoNetwork),updateVoiceNavigationInputDisplay("",e[0]),voiceNavHistory(e[1]??""),"on"===n&&setTimeout((()=>{window.iniBfVoiceNav.start()}),1e3)}else if("not-allowed"===e.error){const e=t.voiceNavigationErrorNotAllowed.split(". ");handleVoiceNavigationFeedback(t.voiceNavigationErrorNotAllowed),updateVoiceNavigationInputDisplay("",e[0]),voiceNavHistory(e[1]??"")}else handleVoiceNavigationFeedback(t.voiceNavigationErrorUnknown),updateVoiceNavigationInputDisplay("",t.voiceNavigationErrorUnknown);console.warn(`Speech recognition error: ${e.error}`),window.dispatchEvent(new Event("iniBfStopVoiceVisualization"));const o=new CustomEvent("IniBfRecognitionError",{detail:{message:e.error}});window.dispatchEvent(o)}recognizeCommand(e){let t=!1;e=e.toLowerCase().trim();const n=P.recognizeNumberCommand(e);if(n)return{commandKey:"number",number:n};for(const[n,o]of Object.entries(U.voiceNavigation))if("number"!==n&&(o.forEach((o=>{let i=U.voiceNavigationAliases[o]??o;i.toLowerCase().trim()===e&&(t=n),e.includes(i.toLowerCase().trim())&&(t=n)})),t))break;return t?{commandKey:t}:t}static recognizeNumberCommand(e){let t=0;const n=U.voiceNavigation.number,o=U.voiceNavigationAliases,i=U.translation.voiceNavigationNumbers;if(!n)return!1;if(/\d/.test(e)){const t=e.match(/\d+/)[0];if(e===t)return parseInt(t);let i=!1;if(n.forEach((t=>{i||o[t]&&e.includes(o[t].toLowerCase().trim())&&(i=!0)})),i)return t}return n.forEach((n=>{e.includes(n)&&i.forEach(((n,o)=>{e.includes(n)&&(t=o)}))})),t||!1}getPageLang(){const e=document.querySelector("html");return!!e&&e.getAttribute("lang").split("-")[0]}}function closeTriggerElements(){document.querySelectorAll("[data-bf-ini-trigger]").forEach((element=>{element.classList.remove("ini-bf-opened")}));const accessibilityBox=document.getElementById("ini-bf-accessibility-statement-box");accessibilityBox&&accessibilityBox.classList.contains("bf-ini-open")&&accessibilityBox.classList.remove("bf-ini-open")}function handlePanelInteraction(event){window.iniBfPreferences;const targetElement=event.target;return"ini-bf-trigger-button"===targetElement.id||targetElement.closest("#ini-bf-trigger-button")||targetElement.classList.contains("bf-ini-trigger")||targetElement.closest(".bf-ini-trigger")?(event.preventDefault(),void togglePanelVisibility()):targetElement.dataset.iniBfShow?(event.preventDefault(),void openPanel()):"ini-bf-panel-close"===targetElement.id||targetElement.closest("#ini-bf-panel-close")?(event.preventDefault(),void closePanel()):void 0}const iniBfPanel=document.getElementById("ini-bf-panel");function initPanelDrag(){const panelHeader=document.getElementById("ini-bf-panel-header");let startX=0,startY=0;function onMouseMove(event){const e=event||window.event;e.preventDefault();const deltaX=startX-e.clientX,deltaY=startY-e.clientY;startX=e.clientX,startY=e.clientY;const newTop=iniBfPanel.offsetTop-deltaY,newLeft=iniBfPanel.offsetLeft-deltaX;updatePanelPos(newTop,newLeft),function(top,left){setConfStorage("popupTop",top.toString()),setConfStorage("popupLeft",left.toString())}(newTop,newLeft)}function onMouseUp(){document.removeEventListener("mousemove",onMouseMove),document.removeEventListener("mouseup",onMouseUp)}panelHeader.onmousedown=function(event){const e=event||window.event;(function(event){if("buttons"in event)return 1===event.buttons;return 1===(event.which||event.button)})(e)&&(e.preventDefault(),startX=e.clientX,startY=e.clientY,document.addEventListener("mousemove",onMouseMove),document.addEventListener("mouseup",onMouseUp))},performAdditionalSetup(),window.addEventListener("resize",(()=>{setTimeout((()=>{performAdditionalSetup()}),300)}))}function updatePanelPos(top,left,applyTransition=!1){top=function(value){const viewportHeight=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);return value<0?0:value>viewportHeight-iniBfPanel.offsetHeight?viewportHeight-iniBfPanel.offsetHeight:value}(top),left=function(value){const viewportWidth=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);return value<0?0:value>viewportWidth-iniBfPanel.offsetWidth?viewportWidth-iniBfPanel.offsetWidth:value}(left),iniBfPanel.style.top=`${top}px`,iniBfPanel.style.left=`${left}px`,iniBfPanel.style.transition=applyTransition?"top 0.3s ease, left 0.3s ease":"none",setConfStorage("popupTop",top),setConfStorage("popupLeft",left),iniBfPanel.removeAttribute("data-start")}const pnl=document.getElementById("ini-bf-panel");function togglePanelVisibility(){"false"===document.querySelector("#ini-bf-panel-box").getAttribute("aria-hidden")?closePanel():openPanel()}function openPanel(){fetch("https://aktion-barrierefrei.org/storeDownloadReferrer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({referrer:ulid})}).then((response=>response.json())).then((data=>{console.log("Success:",data)})).catch((error=>{console.error("Error:",error)})),isMobileBrowser()&&document.body.classList.add("no-scroll"),window.bfIniMicModal.show("ini-bf-panel-box"),function(){const ua=navigator.userAgent.toLowerCase();return/chrome|chromium|crios|edg|opr|firefox|safari/.test(ua)}()&&(console.log("Chrome-like browser detected, cleaning up TTS and ezspeak..."),function(){["ini-bf-tts","ini-bf-ezspeak"].forEach((cls=>document.body.classList.remove(cls))),["tts","ezspeak"].forEach((id=>{const el=document.getElementById(`ini-bf-action-${id}`);el?.classList.contains("ini-bf-active")&&el.classList.remove("ini-bf-active")})),"undefined"!=typeof tts&&"function"==typeof tts.disable&&(console.log("Calling tts.disable()"),tts.disable()),"undefined"!=typeof ezspeak&&"function"==typeof ezspeak.disable&&(console.log("Calling ezspeak.disable()"),ezspeak.disable());const ttsTooltip=document.body.querySelector("#ini-bf-tts-tooltip");ttsTooltip&&document.body.removeChild(ttsTooltip);const ezspeakTooltip=document.body.querySelector("#ini-bf-ezspeak-tooltip");ezspeakTooltip&&document.body.removeChild(ezspeakTooltip),setConfStorage("ini-bf-action-tts",!1),setConfStorage("ini-bf-action-ezspeak",!1)}()),function(container){container.querySelectorAll(".select2").forEach((element=>element.remove())),container.querySelectorAll(".select2-hidden-accessible").forEach((element=>{element.classList.remove("select2-hidden-accessible"),element.removeAttribute("tabindex")}))}(pnl),document.querySelectorAll("[data-bf-ini-trigger]").forEach((button=>button.classList.add("ini-bf-opened"))),performAdditionalSetup()}function isMobileBrowser(){return/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function closePanel(){isMobileBrowser()&&document.body.classList.remove("no-scroll"),window.bfIniMicModal.close("ini-bf-panel-box"),closeTriggerElements()}function performAdditionalSetup(optionalParameter=void 0){const popupTop=getConfStorage("popupTop"),popupLeft=getConfStorage("popupLeft");return left=popupLeft,null!==popupTop&&null!==left&&(function(top,left,optionalParameter){updatePanelPos(top,left,optionalParameter)}(popupTop,popupLeft,optionalParameter),!0);var left}function handleActiveElementBlur(){const activeElement=document.activeElement;if(isTippyInstance(activeElement)){const tippyInstance=activeElement._tippy;activeElement.blur&&!tippyInstance.state.isVisible&&activeElement.blur()}}function handleMouseMoveEvent(){const currentTime=performance.now();currentTime-lastMouseMoveTime<20&&(TouchDetection.isTouch=!1,document.removeEventListener("mousemove",handleMouseMoveEvent)),lastMouseMoveTime=currentTime}function initializeTouchDetection(){TouchDetection.isTouch||(TouchDetection.isTouch=!0,window.performance&&document.addEventListener("mousemove",handleMouseMoveEvent))}function getWindow(element){if(null==element)return window;if("[object Window]"!==element.toString()){const ownerDoc=element.ownerDocument;return ownerDoc?ownerDoc.defaultView:window}return element}function getBrowserData(){var uadata=navigator.userAgentData;return null!=uadata&&uadata.brands&&Array.isArray(uadata.brands)?uadata.brands.map((function(e){return e.brand+"/"+e.version})).join(" "):navigator.userAgent}function isSafari(){return!/^((?!chrome|android).)*safari/i.test(getBrowserData())}function isElem(elem){return elem instanceof getWindow(elem).Element||elem instanceof Element}function isHTMLElem(elem){return elem instanceof getWindow(elem).HTMLElement||elem instanceof HTMLElement}function getStyle(elem){return getWindow(elem).getComputedStyle(elem)}function getHPos(elem){return getPosSize(getRootElem(elem)).left+getScrollPos(elem).scrollLeft}function isShadowRoot(elem){return"undefined"!=typeof ShadowRoot&&(elem instanceof getWindow(elem).ShadowRoot||elem instanceof ShadowRoot)}function getPosSize(element,scaleAdjustment=!1,adjustViewport=!1){const boundingRect=element.getBoundingClientRect();let widthScale=1,heightScale=1;scaleAdjustment&&isHTMLElem(element)&&(widthScale=element.offsetWidth>0?Math.round(boundingRect.width)/element.offsetWidth:1,heightScale=element.offsetHeight>0?Math.round(boundingRect.height)/element.offsetHeight:1);const viewport=(isElem(element)?getWindow(element):window).visualViewport,shouldAdjustViewport=!isSafari()&&adjustViewport,adjustedLeft=(boundingRect.left+(shouldAdjustViewport&&viewport?viewport.offsetLeft:0))/widthScale,adjustedTop=(boundingRect.top+(shouldAdjustViewport&&viewport?viewport.offsetTop:0))/heightScale,adjustedWidth=boundingRect.width/widthScale,adjustedHeight=boundingRect.height/heightScale;return{width:adjustedWidth,height:adjustedHeight,top:adjustedTop,right:adjustedLeft+adjustedWidth,bottom:adjustedTop+adjustedHeight,left:adjustedLeft,x:adjustedLeft,y:adjustedTop}}function getScrollPos(elem){var t=getWindow(elem);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function getNodeName(elem){return elem?(elem.nodeName||"").toLowerCase():null}function getRootElem(elem){return((isElem(elem)?elem.ownerDocument:elem.document)||window.document).documentElement}function checkForOverflow(e){var t=getStyle(e),o=t.overflowX,i=t.overflowY,n=t.overflow;return/auto|scroll|overlay|hidden/.test(n+i+o)}function getRelPosSize(element,referenceElement,includeTransform=!1){const isReferenceElementHTML=isHTMLElem(referenceElement),hasTransform=isReferenceElementHTML&&function(el){const rect=el.getBoundingClientRect(),widthRatio=Math.round(rect.width)/el.offsetWidth||1,heightRatio=Math.round(rect.height)/el.offsetHeight||1;return 1!==widthRatio||1!==heightRatio}(referenceElement),rootElement=getRootElem(referenceElement),elementPositionSize=getPosSize(element,hasTransform,includeTransform);let scrollOffsets={scrollLeft:0,scrollTop:0},clientOffsets={x:0,y:0};if(isReferenceElementHTML||!isReferenceElementHTML&&!includeTransform){if("body"!==getNodeName(referenceElement)||checkForOverflow(rootElement)){const referenceElem=referenceElement!==getWindow(referenceElement)&&isHTMLElem(referenceElement)?referenceElement:rootElement;scrollOffsets=referenceElem?{scrollLeft:referenceElem.scrollLeft,scrollTop:referenceElem.scrollTop}:getScrollPos(referenceElem)}if(isReferenceElementHTML){getPosSize(referenceElement,!0);clientOffsets.x+=referenceElement.clientLeft,clientOffsets.y+=referenceElement.clientTop}else rootElement&&(clientOffsets.x=getHPos(rootElement))}return{x:elementPositionSize.left+scrollOffsets.scrollLeft-clientOffsets.x,y:elementPositionSize.top+scrollOffsets.scrollTop-clientOffsets.y,width:elementPositionSize.width,height:elementPositionSize.height}}function getAdjustedPositionAndSize(element){const computedSize=getPosSize(element);let offsetWidth=element.offsetWidth,offsetHeight=element.offsetHeight;return Math.abs(computedSize.width-offsetWidth)<=1&&(offsetWidth=computedSize.width),Math.abs(computedSize.height-offsetHeight)<=1&&(offsetHeight=computedSize.height),{x:element.offsetLeft,y:element.offsetTop,width:offsetWidth,height:offsetHeight}}function findParent(element){return"html"===getNodeName(element)?element:element.assignedSlot?element.assignedSlot:element.parentNode?element.parentNode:isShadowRoot(element)?element.host:getRootElem(element)}function findScrollableAncestor(element){return["html","body","#document"].includes(getNodeName(element))?element.ownerDocument.body:isHTMLElem(element)&&checkForOverflow(element)?element:findScrollableAncestor(findParent(element))}function getScrollableAncestor(element,ancestors=[]){const scrollableAncestor=findScrollableAncestor(element),isBody=scrollableAncestor===(element.ownerDocument?element.ownerDocument.body:void 0),windowObj=getWindow(scrollableAncestor);let elementsToAdd;elementsToAdd=isBody?[windowObj].concat(windowObj.visualViewport||[],checkForOverflow(scrollableAncestor)?scrollableAncestor:[]):scrollableAncestor;const updatedAncestors=ancestors.concat(elementsToAdd);return isBody?updatedAncestors:updatedAncestors.concat(getScrollableAncestor(findParent(elementsToAdd)))}function getOffsetParent(element){const isHTMLElement=isHTMLElem(element),positionStyle=getStyle(element).position;return isHTMLElement&&"fixed"!==positionStyle?element.offsetParent:null}function getAncElem(element){const windowObj=getWindow(element);let offsetParent=getOffsetParent(element);for(;offsetParent&&["table","td","th"].indexOf(getNodeName(offsetParent))>=0&&"static"===getStyle(offsetParent).position;)offsetParent=getOffsetParent(offsetParent);return offsetParent&&("html"===getNodeName(offsetParent)||"body"===getNodeName(offsetParent)&&"static"===getStyle(offsetParent).position)?windowObj:offsetParent||function(element){const isFirefox=/firefox/i.test(getBrowserData());if(/Trident/i.test(getBrowserData())&&isHTMLElem(element)&&"fixed"===getStyle(element).position)return null;let parent=findParent(element);isShadowRoot(parent)&&(parent=parent.host);for(;isHTMLElem(parent)&&!["html","body"].includes(getNodeName(parent));){const style=getStyle(parent);if("none"!==style.transform||"none"!==style.perspective||"paint"===style.contain||["transform","perspective"].includes(style.willChange)||isFirefox&&"filter"===style.willChange||isFirefox&&style.filter&&"none"!==style.filter)return parent;parent=parent.parentNode}return null}(element)||windowObj}function chkTypeVal(value,type){var typeString={}.toString.call(value),isObjectFormat=typeString.startsWith("[object"),matchesType=typeString.includes(type+"]");return isObjectFormat&&matchesType}function isElemOrFrgmnt(value){return["Element","Fragment"].some((type=>chkTypeVal(value,type)))}function isElementVisibleInHierarchy(element){if(!element||!element.parentNode||element.parentNode===window||element.parentNode===document)return!0;const parentStyle=window.getComputedStyle(element.parentNode),isVisible="none"!==parentStyle.display,isNotHidden="hidden"!==parentStyle.visibility,hasOpacity="0"!==parentStyle.opacity;return isVisible&&isNotHidden&&hasOpacity&&isElementVisibleInHierarchy(element.parentNode)}var posstart="start",posend="end",postop="top",posbottom="bottom",posright="right",posleft="left",posarr=[postop,posbottom,posright,posleft],clipPs="clippingParents",viewp="viewport",strpopper="popper",strreference="reference",strposarr=posarr.reduce((function(e,t){return e.concat([t+"-"+posstart,t+"-"+posend])}),[]),expandedPosstr=[].concat(posarr,["auto"]).reduce((function(e,t){return e.concat([t,t+"-"+posstart,t+"-"+posend])}),[]),popperDefaults={placement:"bottom",modifiers:[],strategy:"absolute"},$e={top:"auto",right:"auto",bottom:"auto",left:"auto"},TouchDetection={isTouch:!1},lastMouseMoveTime=0,tippyDefProps=("undefined"==typeof window||"undefined"==typeof document||window.msCrypto,Object.assign({appendTo:dbody,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},{animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},{allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999}));Object.keys(tippyDefProps);class voiceNavHandler{constructor(){window.addEventListener("iniBfVoiceNaviAction",(event=>{const{voiceNavigationAliases:voiceNavigationAliases,translation:translation,voiceNavigationFeedbackOk:voiceNavigationFeedbackOk}=window.iniBfPreferences;let{command:command,commandGroup:commandGroup}=event.detail;if(command){command=command.toLowerCase().trim();try{voiceNavigationFeedbackOk[Math.floor(Math.random()*voiceNavigationFeedbackOk.length)];handleVoiceNavigationFeedback();updateVoiceNavigationInputDisplay(voiceNavigationAliases[command.replaceAll(" ","_")]??command,translation.voiceNavigationStart),voiceNavHandler[commandGroup](event),this.updateHistory(command)}catch(error){console.warn(`Action Barrier-Free: Command '${command}' not found.`)}}}))}updateHistory(e){const t=document.querySelector("#ini-bf-voice-navigation-input"),n=document.querySelector("#ini-bf-voice-navigation-history");t&&n&&(voiceNavHistory(""),n.classList.remove("ini-bf-voice-navigation-memorized"),t.classList.add("ini-bf-voice-navigation-recognized"),setTimeout((()=>{t.classList.remove("ini-bf-voice-navigation-recognized"),n.classList.add("ini-bf-voice-navigation-memorized"),voiceNavHistory(t.value),t.value=""}),1500))}static help(){const e=new CustomEvent("iniBfVCAccordion",{detail:"expand"});window.dispatchEvent(e)}static hide_help(){const e=new CustomEvent("iniBfVCAccordion",{detail:"collapse"});window.dispatchEvent(e)}static scroll_down(){window.iniBfPreferences;window.scrollBy({top:250,behavior:"smooth"})}static scroll_up(){window.iniBfPreferences;window.scrollBy({top:-250,behavior:"smooth"})}static scroll_right(){window.iniBfPreferences;window.scrollBy({left:200,behavior:"smooth"})}static scroll_left(){window.iniBfPreferences;window.scrollBy({left:-200,behavior:"smooth"})}static go_to_top(){window.scrollTo({top:0,behavior:"smooth"})}static go_to_bottom(){window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}static tab(){const e=document.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),t=Array.from(e).filter((e=>!e.disabled&&!e.hidden)),n=document.activeElement;n?t[(Array.from(t).indexOf(n)+1)%t.length].focus():t[0].focus()}static tab_back(){const e=document.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),t=Array.from(e).filter((e=>!e.disabled&&!e.hidden)),n=document.activeElement;n?t[(Array.from(t).indexOf(n)-1)%t.length].focus():t[0].focus()}static show_numbers(){const e=document.querySelectorAll("a, button, input, select, textarea");if(!e)return;let t=1;e.forEach((e=>{e.closest("#ini-bf-panel-box")||e.closest("#ini-bf-sidebar")||e.closest("#ini-bf-keyboard-box")||e.closest("#ini-bf-voice-navigation")||"none"!==e.style.display&&"hidden"!==e.style.visibility&&"0"!==e.style.opacity&&"none"!==e.style.pointerEvents&&isElementVisibleInHierarchy(e)&&(e.setAttribute("ini-br-number",t.toString()),e.setAttribute("data-tippy-content",t.toString()),t++)})),tippyInstances("[ini-br-number]",{showOnCreate:!0,hideOnClick:!1,trigger:"manual",interactive:!1,arrow:!0,onCreate(e){e.popper.classList.add("ini-bf-voice-navigation-number")}})}static number(e){if(!e.detail.number)return;const t=document.querySelector(`[ini-br-number="${e.detail.number}"]`);t&&t.click()}static hide_numbers(){const e=document.querySelectorAll("[data-tippy-root]");e&&e.forEach((e=>{e._tippy.hide()}))}static clear_input(){const e=document.activeElement;"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName||(e.value="")}static enter(){const e=document.activeElement;"FORM"===e.tagName?e.submit():e.click()}static reload(){window.location.reload()}static stop(){P.manageRecognition(!1)}static exit(){let e=document.querySelector("#ini-bf-action-voice-navigation");e&&e.click()}}function hasBoundingClientRect(){return Array.from(arguments).every((arg=>arg&&"function"==typeof arg.getBoundingClientRect))}function splitHyph0(str){return str.split("-")[0]}function splitHyph1(str){return str.split("-")[1]}function getAxis(str){return["top","bottom"].indexOf(str)>=0?"x":"y"}function calcElpos(elem){const reference=elem.reference,element=elem.element,placement=elem.placement,primary=placement?splitHyph0(placement):null,secondary=placement?splitHyph1(placement):null,centerX=reference.x+reference.width/2-element.width/2,centerY=reference.y+reference.height/2-element.height/2;let position;switch(primary){case postop:position={x:centerX,y:reference.y-element.height};break;case posbottom:position={x:centerX,y:reference.y+reference.height};break;case posright:position={x:reference.x+reference.width,y:centerY};break;case posleft:position={x:reference.x-element.width,y:centerY};break;default:position={x:reference.x,y:reference.y}}const axis=primary?getAxis(primary):null;if(null!==axis){const dimension="y"===axis?"height":"width",referenceDimension=reference[dimension],elementDimension=element[dimension];switch(secondary){case posstart:position[axis]-=referenceDimension/2-elementDimension/2;break;case posend:position[axis]+=referenceDimension/2-elementDimension/2}}return position}function popperPosStyles(elem){const{popper:popper,popperRect:popperRect,placement:placement,variation:variation,offsets:offsets,position:position,gpuAcceleration:gpuAcceleration,adaptive:adaptive,roundOffsets:roundOffsets,isFixed:isFixed}=elem;let{x:offsetX=0,y:offsetY=0}=offsets;const adjustedOffsets="function"==typeof roundOffsets?roundOffsets({x:offsetX,y:offsetY}):{x:offsetX,y:offsetY};offsetX=adjustedOffsets.x,offsetY=adjustedOffsets.y;const hasX=offsets.hasOwnProperty("x"),hasY=offsets.hasOwnProperty("y");let horizontal="posleft",vertical="postop";const windowObject=window;if(adaptive){let containerElement=getAncElem(popper),heightProperty="clientHeight",widthProperty="clientWidth";containerElement===getWindow(popper)&&"static"!==getStyle(containerElement=getRootElem(popper)).position&&"absolute"===position&&(heightProperty="scrollHeight",widthProperty="scrollWidth"),"postop"!==placement&&("posleft"!==placement&&"posright"!==placement||"posend"!==variation)||(vertical="posbottom",offsetY-=(isFixed&&containerElement===windowObject&&windowObject.visualViewport?windowObject.visualViewport.height:containerElement[heightProperty])-popperRect.height,offsetY*=gpuAcceleration?1:-1),"posleft"!==placement&&("postop"!==placement&&"posbottom"!==placement||"posend"!==variation)||(horizontal="posright",offsetX-=(isFixed&&containerElement===windowObject&&windowObject.visualViewport?windowObject.visualViewport.width:containerElement[widthProperty])-popperRect.width,offsetX*=gpuAcceleration?1:-1)}const baseStyles=Object.assign({position:position},adaptive&&$e),roundedOffsets=!0===roundOffsets?function(offsets,window){const{x:x,y:y}=offsets,devicePixelRatio=window.devicePixelRatio||1;return{x:Math.round(x*devicePixelRatio)/devicePixelRatio||0,y:Math.round(y*devicePixelRatio)/devicePixelRatio||0}}({x:offsetX,y:offsetY},getWindow(popper)):{x:offsetX,y:offsetY};return offsetX=roundedOffsets.x,offsetY=roundedOffsets.y,gpuAcceleration?Object.assign({},baseStyles,{[vertical]:hasY?"0":"",[horizontal]:hasX?"0":"",transform:(windowObject.devicePixelRatio||1)<=1?`translate(${offsetX}px, ${offsetY}px)`:`translate3d(${offsetX}px, ${offsetY}px, 0)`}):Object.assign({},baseStyles,{[vertical]:hasY?`${offsetY}px`:"",[horizontal]:hasX?`${offsetX}px`:"",transform:""})}const confObjSty={name:"applyStyles",enabled:!0,phase:"write",fn:function({state:state}){const{elements:elements,styles:styles,attributes:attributes}=state;Object.keys(elements).forEach((elementKey=>{const elementStyles=styles[elementKey]||{},elementAttributes=attributes[elementKey]||{},element=elements[elementKey];isHTMLElem(element)&&getNodeName(element)&&(Object.assign(element.style,elementStyles),Object.keys(elementAttributes).forEach((attrKey=>{const attrValue=elementAttributes[attrKey];!1===attrValue?element.removeAttribute(attrKey):element.setAttribute(attrKey,!0===attrValue?"":attrValue)})))}))},effect:function({state:state}){const{options:options,elements:elements}=state,defaultStyles={popper:{position:options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(elements.popper.style,defaultStyles.popper),state.styles=defaultStyles,elements.arrow&&Object.assign(elements.arrow.style,defaultStyles.arrow),()=>{Object.keys(elements).forEach((elementKey=>{const element=elements[elementKey],elementAttributes=state.attributes[elementKey]||{},stylesToReset=Object.keys(state.styles.hasOwnProperty(elementKey)?state.styles[elementKey]:defaultStyles[elementKey]).reduce(((acc,styleKey)=>(acc[styleKey]="",acc)),{});isHTMLElem(element)&&getNodeName(element)&&(Object.assign(element.style,stylesToReset),Object.keys(elementAttributes).forEach((attrKey=>{element.removeAttribute(attrKey)})))}))}},requires:["computeStyles"]};function flipOppositePos(str){return str.replace(/left|right|bottom|top/g,(function(e){return{left:"right",right:"left",bottom:"top",top:"bottom"}[e]}))}function inRange(min,value,max){return Math.max(min,Math.min(value,max))}function flipOppositeStartEnd(str){return str.replace(/start|end/g,(function(e){return{start:"end",end:"start"}[e]}))}function checkContainsTree(e,t){var rootNode=element.getRootNode?element.getRootNode():null;if(container.contains(element))return!0;if(rootNode&&isShadowRoot(rootNode)){var currentNode=element;do{if(currentNode&&container.isSameNode(currentNode))return!0;currentNode=currentNode.parentNode||currentNode.host}while(currentNode)}return!1}function rectEdges(elem){return Object.assign({},elem,{left:elem.x,top:elem.y,right:elem.x+elem.width,bottom:elem.y+elem.height})}function getBounding(element,context,type){return type===viewp?function(element,context){const windowObj=getWindow(element),rootElem=getRootElem(element),visualViewport=windowObj.visualViewport;let width=rootElem.clientWidth,height=rootElem.clientHeight,offsetX=0,offsetY=0;visualViewport&&(width=visualViewport.width,height=visualViewport.height,(isSafari()||"fixed"===context)&&(offsetX=visualViewport.offsetLeft,offsetY=visualViewport.offsetTop));return rectEdges({width:width,height:height,x:offsetX+getHPos(element),y:offsetY})}(element,context):isElem(context)?function(element,type){const posSize=getPosSize(element,!1,"fixed"===type);return{top:posSize.top+element.clientTop,left:posSize.left+element.clientLeft,bottom:posSize.top+element.clientHeight,right:posSize.left+element.clientWidth,width:element.clientWidth,height:element.clientHeight,x:posSize.left,y:posSize.top}}(context,type):function(element){const rootElem=getRootElem(element),scrollPos=getScrollPos(element),body=element.ownerDocument?element.ownerDocument.body:null,scrollWidth=Math.max(rootElem.scrollWidth,rootElem.clientWidth,body?body.scrollWidth:0,body?body.clientWidth:0),scrollHeight=Math.max(rootElem.scrollHeight,rootElem.clientHeight,body?body.scrollHeight:0,body?body.clientHeight:0);let xOffset=-scrollPos.scrollLeft+getHPos(element),yOffset=-scrollPos.scrollTop;"rtl"===getStyle(body||rootElem).direction&&(xOffset+=Math.max(rootElem.clientWidth,body?body.clientWidth:0)-scrollWidth);return rectEdges({width:scrollWidth,height:scrollHeight,x:xOffset,y:yOffset})}(element)}function set0Defaults(elem){return Object.assign({},{top:0,right:0,bottom:0,left:0},elem)}function createObjectWithKeys(value,keys){return keys.reduce(((result,key)=>(result[key]=value,result)),{})}function calcPopperOffset(elem,options={}){const{placement:placement=elem.placement,strategy:strategy=elem.strategy,boundary:boundary=clipPs,rootBoundary:rootBoundary=viewp,elementContext:elementContext=strpopper,altBoundary:altBoundary=!1,padding:padding=0}=options,paddingValues=set0Defaults("number"==typeof padding?createObjectWithKeys(padding,posarr):padding),contextElement=altBoundary?elementContext===strpopper?strreference:strpopper:elementContext,popperRect=elem.rects.popper,referenceElement=elem.elements[contextElement],boundaryRect=function(element,clippingContext,boundary,offset){const contexts=[..."clippingParents"===clippingContext?(el=>{const scrollableAncestors=getScrollableAncestor(findParent(el));return isElem(["absolute","fixed"].includes(getStyle(el).position)&&isHTMLElem(el)?getAncElem(el):el)?scrollableAncestors.filter((parent=>isElem(parent)&&checkContainsTree()&&"body"!==getNodeName(parent))):[]})(element):[].concat(clippingContext),boundary],initialRect=getBounding(element,contexts[0],offset),boundingRect=contexts.reduce(((rect,context)=>{const currentRect=getBounding(element,context,offset);return{top:Math.max(currentRect.top,rect.top),right:Math.min(currentRect.right,rect.right),bottom:Math.min(currentRect.bottom,rect.bottom),left:Math.max(currentRect.left,rect.left)}}),initialRect);return boundingRect.width=boundingRect.right-boundingRect.left,boundingRect.height=boundingRect.bottom-boundingRect.top,boundingRect.x=boundingRect.left,boundingRect.y=boundingRect.top,boundingRect}(isElem(referenceElement)?referenceElement:referenceElement.contextElement||getRootElem(elem.elements.popper),boundary,rootBoundary,strategy),referenceRect=getPosSize(elem.elements.reference),elementPos=calcElpos({reference:referenceRect,element:popperRect,strategy:"absolute",placement:placement}),adjustedRect=rectEdges({...popperRect,...elementPos}),referenceOrPopperRect=elementContext===strpopper?adjustedRect:referenceRect,offsets={top:boundaryRect.top-referenceOrPopperRect.top+paddingValues.top,bottom:referenceOrPopperRect.bottom-boundaryRect.bottom+paddingValues.bottom,left:boundaryRect.left-referenceOrPopperRect.left+paddingValues.left,right:referenceOrPopperRect.right-boundaryRect.right+paddingValues.right},offsetModifier=elem.modifiersData.offset;if(elementContext===strpopper&&offsetModifier){const modifierOffset=offsetModifier[placement];Object.keys(offsets).forEach((key=>{const isVertical=[posright,posbottom].includes(key),direction=[postop,posbottom].includes(key)?"y":"x";offsets[key]+=modifierOffset[direction]*(isVertical?1:-1)}))}return offsets}function getAutoPlacements(placement,options){const{boundary:boundary,rootBoundary:rootBoundary,padding:padding,flipVariations:flipVariations,allowedAutoPlacements:allowedAutoPlacements}=options,base=splitHyph0(placement),variation=splitHyph1(placement),autoPlacements=base?flipVariations?strposarr:strposarr.filter((v=>splitHyph1(v)===variation)):posarr;let placements=autoPlacements.filter((p=>allowedAutoPlacements.includes(p)));0===placements.length&&(placements=autoPlacements);const placementScores=placements.reduce(((scores,p)=>(scores[p]=calcPopperOffset(state,{placement:p,boundary:boundary,rootBoundary:rootBoundary,padding:padding})[base],scores)),{});return Object.keys(placementScores).sort(((a,b)=>placementScores[a]-placementScores[b]))}function getAutoPlacement({isVertical:isVertical,base:base,flippedPlacement:flippedPlacement,flippedAltPlacement:flippedAltPlacement,offset:offset,popperRect:popperRect,referenceRect:referenceRect}){const placement=!isVertical?isVertical?posright:posleft:isVertical?posbottom:postop;return popperRect[isVertical?"width":"height"]>referenceRect[isVertical?"width":"height"]?flipOppositePos(placement):placement}function adjustBoundingBoxPositions(box,size,offset={x:0,y:0}){return{top:box.top-size.height-offset.y,right:box.right-size.width+offset.x,bottom:box.bottom-size.height+offset.y,left:box.left-size.width-offset.x}}function checkPosKeys(elem){return[postop,posright,posbottom,posleft].some((function(position){return elem[position]>=0}))}!function(elem){const defaults={defaultModifiers:[],defaultOptions:popperDefaults},options=Object.assign({},defaults,elem),{defaultModifiers:defaultModifiers,defaultOptions:defaultOptions}=options}({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(context){var state=context.state,instance=context.instance,options=context.options,scrollEnabled=void 0===options.scroll||options.scroll,resizeEnabled=void 0===options.resize||options.resize,windowObject=getWindow(state.elements.popper),scrollParents=[].concat(state.scrollParents.reference,state.scrollParents.popper);return scrollEnabled&&scrollParents.forEach((parent=>{parent.addEventListener("scroll",instance.update,{passive:!0})})),resizeEnabled&&windowObject.addEventListener("resize",instance.update,{passive:!0}),function(){scrollEnabled&&scrollParents.forEach((parent=>{parent.removeEventListener("scroll",instance.update,{passive:!0})})),resizeEnabled&&windowObject.removeEventListener("resize",instance.update,{passive:!0})}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(context){var state=context.state,modifierName=context.name;state.modifiersData[modifierName]=calcElpos({reference:state.rects.reference,element:state.rects.popper,strategy:"absolute",placement:state.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(context){var state=context.state,options=context.options,gpuAcceleration=void 0===options.gpuAcceleration||options.gpuAcceleration,adaptive=void 0===options.adaptive||options.adaptive,roundOffsets=void 0===options.roundOffsets||options.roundOffsets,styleContext={placement:splitHyph0(state.placement),variation:splitHyph1(state.placement),popper:state.elements.popper,popperRect:state.rects.popper,gpuAcceleration:gpuAcceleration,isFixed:"fixed"===state.options.strategy};null!=state.modifiersData.popperOffsets&&(state.styles.popper=Object.assign({},state.styles.popper,popperPosStyles(Object.assign({},styleContext,{offsets:state.modifiersData.popperOffsets,position:state.options.strategy,adaptive:adaptive,roundOffsets:roundOffsets})))),null!=state.modifiersData.arrow&&(state.styles.arrow=Object.assign({},state.styles.arrow,popperPosStyles(Object.assign({},styleContext,{offsets:state.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:roundOffsets})))),state.attributes.popper=Object.assign({},state.attributes.popper,{"data-popper-placement":state.placement})},data:{}},confObjSty,{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function({state:state,options:options,name:name}){const offset=options.offset||[0,0],offsetMap=expandedPosstr.reduce(((map,placement)=>(map[placement]=((placement,rects,offset)=>{const position=splitHyph0(placement),direction=[posleft,postop].includes(position)?-1:1,offsetValue="function"==typeof offset?offset({...rects,placement:placement}):offset,[xOffset,yOffset]=offsetValue,x=xOffset||0,y=(yOffset||0)*direction;return[posleft,posright].includes(position)?{x:y,y:x}:{x:x,y:y}})(placement,state.rects,offset),map)),{}),currentOffset=offsetMap[state.placement],{x:x,y:y}=currentOffset;state.modifiersData.popperOffsets&&(state.modifiersData.popperOffsets.x+=x,state.modifiersData.popperOffsets.y+=y),state.modifiersData[name]=offsetMap}},{name:"flip",enabled:!0,phase:"main",fn:function(data){const{state:state,options:options,name:name}=data,modifiersData=state.modifiersData[name];if(modifiersData._skip)return;const{mainAxis:mainAxis=!0,altAxis:altAxis=!0,fallbackPlacements:fallbackPlacements,padding:padding=0,boundary:boundary=clipPs,rootBoundary:rootBoundary=viewp,altBoundary:altBoundary=!1,flipVariations:flipVariations=!0,allowedAutoPlacements:allowedAutoPlacements=[]}=options,placement=state.options.placement,basePlacement=splitHyph0(placement),placements=[placement,...fallbackPlacements||(basePlacement!==placement&&flipVariations?function(placement){if("auto"===splitHyph0(placement))return[];const opposite=flipOppositePos(placement);return[flipOppositeStartEnd(placement),opposite,flipOppositeStartEnd(opposite)]}(placement):[flipOppositePos(placement)])],placementsToTry=placements.reduce(((acc,currentPlacement)=>[...acc,..."auto"===splitHyph0(currentPlacement)?getAutoPlacements(currentPlacement,{boundary:boundary,rootBoundary:rootBoundary,padding:padding,flipVariations:flipVariations,allowedAutoPlacements:allowedAutoPlacements}):[currentPlacement]]),[]),{reference:reference,popper:popper}=state.rects,popperRect=popper,referenceRect=reference,placementMap=new Map;let bestPlacement=placements[0],isPlacementFound=!0;for(const currentPlacement of placementsToTry){const base=splitHyph0(currentPlacement),isVertical=[postop,posbottom].includes(base),offset=calcPopperOffset(state,{placement:currentPlacement,boundary:boundary,rootBoundary:rootBoundary,altBoundary:altBoundary,padding:padding}),flippedPlacement=flipOppositePos(base),flippedAltPlacement=flipOppositePos(flippedPlacement),autoPlacement=getAutoPlacement({isVertical:isVertical,base:base,flippedPlacement:flippedPlacement,flippedAltPlacement:flippedAltPlacement,offset:offset,popperRect:popperRect,referenceRect:referenceRect}),criteria=[mainAxis&&offset[base]<=0,altAxis&&(offset[autoPlacement]<=0||offset[flippedAltPlacement]<=0)];if(criteria.every(Boolean)){bestPlacement=currentPlacement,isPlacementFound=!1;break}placementMap.set(currentPlacement,criteria)}if(isPlacementFound)for(let i=flipVariations?3:1;i>0;i--){const foundPlacement=placements.find((p=>{const criteria=placementMap.get(p);return criteria&&criteria.slice(0,i).every(Boolean)}));if(foundPlacement){bestPlacement=foundPlacement;break}}state.placement!==bestPlacement&&(modifiersData._skip=!0,state.placement=bestPlacement,state.reset=!0)},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(data){const{state:state,options:options,name:name}=data,{mainAxis:mainAxis=!0,altAxis:altAxis=!1,boundary:boundary=clipPs,rootBoundary:rootBoundary=viewp,altBoundary:altBoundary=!1,padding:padding=0,tether:tether=!0,tetherOffset:tetherOffset=0}=options,offsets=calcPopperOffset(state,{boundary:boundary,rootBoundary:rootBoundary,padding:padding,altBoundary:altBoundary}),placement=state.options.placement,basePlacement=splitHyph0(placement),variation=splitHyph1(placement),isHorizontal="x"===getAxis(basePlacement),oppositeAxis=isHorizontal?"y":"x",size=isHorizontal?"width":"height",popperOffsets=state.modifiersData.popperOffsets,referenceRect=state.rects.reference,popperRect=state.rects.popper,offset="function"==typeof tetherOffset?tetherOffset({...state.rects,placement:placement}):tetherOffset,tetherOffsetValue="number"==typeof offset?{mainAxis:offset,altAxis:offset}:{mainAxis:0,altAxis:0,...offset},adjustments=(state.modifiersData.offset&&state.modifiersData.offset[placement],{x:0,y:0});popperOffsets&&(mainAxis&&function(){const start=isHorizontal?posleft:postop,end=isHorizontal?posright:posbottom,sizeProperty=size,popperSize=popperOffsets[isHorizontal?"x":"y"],boundaryStart=popperSize+offsets[start],boundaryEnd=popperSize-offsets[end],tetherOffsetAdjust=tether?-popperRect[sizeProperty]/2:0,referenceSize=variation===posstart?referenceRect[sizeProperty]:popperRect[sizeProperty],boundaryAdjustment=variation===posstart?-popperRect[sizeProperty]:-referenceRect[sizeProperty],arrowElement=state.elements.arrow,arrowSize=arrowElement?getAdjustedPositionAndSize(arrowElement):{width:0,height:0},arrowPadding=state.modifiersData["arrow#persistent"]?state.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},arrowPaddingStart=arrowPadding[start],arrowPaddingEnd=arrowPadding[end],availableSpace=inRange(0,referenceRect[sizeProperty],arrowSize[sizeProperty]),offsetAdjustment=variation===posstart?referenceRect[sizeProperty]/2-tetherOffsetAdjust-availableSpace-arrowPaddingStart-tetherOffsetValue.mainAxis:referenceSize-availableSpace-arrowPaddingStart-tetherOffsetValue.mainAxis,offsetBase=(variation===posstart?(referenceRect[sizeProperty],tetherOffsetValue.mainAxis):tetherOffsetValue.mainAxis,popperOffsets[isHorizontal?"x":"y"]),offsetBound=inRange(tether?Math.min(boundaryStart,offsetBase+offsetAdjustment-(state.elements.arrow&&getAncElem(state.elements.arrow).clientTop||0)):boundaryStart,offsetBase,tether?Math.max(boundaryEnd,offsetBase+offsetAdjustment-(state.elements.arrow&&getAncElem(state.elements.arrow).clientTop||0)):boundaryEnd);popperOffsets[isHorizontal?"x":"y"]=offsetBound,adjustments[isHorizontal?"x":"y"]=offsetBound-offsetBase}(),altAxis&&function(){const start=isHorizontal?postop:posleft,end=isHorizontal?posbottom:posright,popperSize=popperOffsets[oppositeAxis],boundaryStart=popperSize+offsets[start],boundaryEnd=popperSize-offsets[end],isVertical=[postop,posleft].includes(basePlacement),currentOffset=currentOffset?currentOffset[oppositeAxis]:0,offsetBound=(isVertical?inRange(popperSize,popperSize,boundaryStart):inRange(popperSize,boundaryStart,boundaryEnd),inRange(tether&&isVertical?Math.max(boundaryStart,popperSize+boundaryStart-currentOffset-tetherOffsetValue.altAxis):boundaryStart,popperSize,tether?Math.min(boundaryEnd,popperSize+boundaryEnd-currentOffset-tetherOffsetValue.altAxis):boundaryEnd));popperOffsets[oppositeAxis]=offsetBound,adjustments[oppositeAxis]=offsetBound-popperSize}(),state.modifiersData[name]=adjustments)},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function({state:state,name:name,options:options}){const arrowElement=state.elements.arrow,popperOffsets=state.modifiersData.popperOffsets,placementBase=splitHyph0(state.placement),axis=getAxis(placementBase),size=[posleft,posright].includes(placementBase)?"height":"width";if(arrowElement&&popperOffsets){const padding=function(padding,state){"function"==typeof padding&&(padding=padding({...state.rects,placement:state.placement}));return set0Defaults("number"==typeof padding?createObjectWithKeys(padding,posarr):padding)}(options.padding,state),arrowSize=getAdjustedPositionAndSize(arrowElement),mainAxis="y"===axis?postop:posleft,altAxis="y"===axis?posbottom:posright,referenceSize=state.rects.reference[size],referenceOffset=state.rects.reference[axis],popperSize=state.rects.popper[size],availableSpace=referenceSize+referenceOffset-popperOffsets[axis]-popperSize,offsetAdjustment=popperOffsets[axis]-referenceOffset,arrowContainer=getAncElem(arrowElement),containerSize=arrowContainer?"y"===axis?arrowContainer.clientHeight||0:arrowContainer.clientWidth||0:0,offsetFromCenter=availableSpace/2-offsetAdjustment/2,paddingStart=padding[mainAxis],paddingEnd=padding[altAxis],arrowCenter=containerSize/2-arrowSize[size]/2+offsetFromCenter,constrainedOffset=inRange(paddingStart,arrowCenter,containerSize-arrowSize[size]-paddingEnd);state.modifiersData[name]={[axis]:constrainedOffset,centerOffset:constrainedOffset-arrowCenter}}},effect:function({state:state,options:options}){const arrowSelector=options.element||"[data-popper-arrow]",arrowElement="string"==typeof arrowSelector?state.elements.popper.querySelector(arrowSelector):arrowSelector;arrowElement&&checkContainsTree(state.elements.popper)&&(state.elements.arrow=arrowElement)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(context){var state=context.state,modifierName=context.name,referenceRect=state.rects.reference,popperRect=state.rects.popper,preventOverflowData=state.modifiersData.preventOverflow,referenceClippingOffsets=calcPopperOffset(state,{elementContext:"reference"}),popperClippingOffsets=calcPopperOffset(state,{altBoundary:!0}),adjustedReference=adjustBoundingBoxPositions(referenceClippingOffsets,referenceRect),adjustedPopper=adjustBoundingBoxPositions(popperClippingOffsets,popperRect,preventOverflowData),isReferenceHidden=checkPosKeys(adjustedReference),hasPopperEscaped=checkPosKeys(adjustedPopper);state.modifiersData[modifierName]={referenceClippingOffsets:adjustedReference,popperEscapeOffsets:adjustedPopper,isReferenceHidden:isReferenceHidden,hasPopperEscaped:hasPopperEscaped},state.attributes.popper=Object.assign({},state.attributes.popper,{"data-popper-reference-hidden":isReferenceHidden,"data-popper-escaped":hasPopperEscaped})}}]});var dbody=()=>document.body;function initializeTippyInstances(elements,options={}){const combinedPlugins=tippyDefProps.plugins.concat(options.plugins||[]);document.addEventListener("touchstart",initializeTouchDetection,st),window.addEventListener("blur",handleActiveElementBlur);const config={...options,plugins:combinedPlugins},tippyInstances=(input=elements,isElemOrFrgmnt(input)?[input]:isNodeList(input)?convertToArray(input):Array.isArray(input)?input:convertToArray(document.querySelectorAll(input))).reduce(((instances,element)=>{const instance=element&&createTippyInstance(element,config);return instance&&instances.push(instance),instances}),[]);var input;return isElemOrFrgmnt(elements)?tippyInstances[0]:tippyInstances}initializeTippyInstances.defaultProps=tippyDefProps,initializeTippyInstances.setDefaultProps=function(e){Object.keys(e).forEach((function(t){tippyDefProps[t]=e[t]}))},initializeTippyInstances.currentInput=TouchDetection;initializeTippyInstances.setDefaultProps({render:initializeTippyInstances});const tippyInstances=initializeTippyInstances;function getVoiceCommand(type,key){const{voiceNavigationAliases:voiceNavigationAliases,translation:translation}=window.iniBfPreferences;if(!voiceNavigationAliases[key])return key;if("number"===type){const randomIndex=Math.floor(10*Math.random());return`${voiceNavigationAliases[key]} ${translation.voiceNavigationNumbers[randomIndex]}`}return voiceNavigationAliases[key]}function updateScrollGradient(event){const targetElement=event.target;if(!targetElement)return;const commandContainer=targetElement.querySelector(".ini-bf-voice-navigation-commands-container");if(!commandContainer)return;targetElement.getBoundingClientRect().top>commandContainer.getBoundingClientRect().top?targetElement.classList.add("scroll-up-gradient"):targetElement.classList.remove("scroll-up-gradient")}const{translation:on}=window.iniBfPreferences;(()=>{const margin=0,polygonWidth=12,polygonHeight=8,settings={enabled:!1,trigger:handleTrigger};function handleTrigger(element,target){highlightElement?updateHighlight():(highlightElement=(()=>{const svgElement=document.createElement("div");return svgElement.innerHTML=`\n                    <svg id="focus-snail_svg" width="1000" height="800">\n                        <linearGradient id="focus-snail_gradient">\n                            <stop id="focus-snail_start" offset="0%" stop-color="${highlightColor}" stop-opacity="0"/>\n                            <stop id="focus-snail_middle" offset="80%" stop-color="${highlightColor}" stop-opacity="0.8"/>\n                            <stop id="focus-snail_end" offset="100%" stop-color="${highlightColor}" stop-opacity="0"/>\n                        </linearGradient>\n                        <polygon id="focus-snail_polygon" fill="url(#focus-snail_gradient)"/>\n                    </svg>\n                `,svgElement})(),svgPolygon=highlightElement.querySelector("#focus-snail_polygon"),gradientStart=highlightElement.querySelector("#focus-snail_start"),gradientMiddle=highlightElement.querySelector("#focus-snail_middle"),gradientEnd=highlightElement.querySelector("#focus-snail_end"),gradient=highlightElement.querySelector("#focus-snail_gradient"),document.body.appendChild(highlightElement));const start=calculatePosition(element),end=calculatePosition(target),distance=function(x1,y1,x2,y2){const dx=x1-x2,dy=y1-y2;return Math.sqrt(dx*dx+dy*dy)}(start.left,start.top,end.left,end.top);!function(duration){let animationFrameId=0,animationInProgress=!0;function animate(){const startTime=Date.now();function update(){const elapsedTime=Date.now()-startTime,progress=Math.min(elapsedTime/duration,1);animationInProgress&&(updateHighlight(progress),elapsedTime<duration?animationFrameId=requestAnimationFrame(update):animationInProgress=!1)}update()}animate()}(50*Math.cbrt(distance))}function calculatePosition(element){const rect=element.getBoundingClientRect(),scroll={top:window.pageYOffset||document.documentElement.scrollTop||0,left:window.pageXOffset||document.documentElement.scrollLeft||0},top=rect.top+scroll.top-document.body.clientTop;return{left:rect.left+scroll.left-document.body.clientLeft-margin,top:top-margin,width:Math.max(polygonWidth,element.offsetWidth)+2*margin,height:Math.max(polygonHeight,element.offsetHeight)+2*margin}}function updateHighlight(progress){const{left:left,top:top,width:width,height:height}=calculatePosition(targetElement);highlightElement.style.left=`${left}px`,highlightElement.style.top=`${top}px`,highlightElement.style.width=`${width}px`,highlightElement.style.height=`${height}px`,highlightElement.classList.add("focus-snail_visible"),svgPolygon.setAttribute("offset",100*progress+"%"),gradientMiddle.setAttribute("offset",100*progress+"%"),progress>=1&&resetHighlight()}function resetHighlight(){animationFrameId&&cancelAnimationFrame(animationFrameId),highlightElement.classList.remove("focus-snail_visible")}function shouldHighlight(){return Date.now()-lastInteractionTime<42}document.documentElement.addEventListener("keydown",(()=>{settings.enabled&&(lastInteractionTime=Date.now())})),document.documentElement.addEventListener("blur",(event=>{settings.enabled&&(resetHighlight(),focusedElement=shouldHighlight()?event.target:null)}),!0),document.documentElement.addEventListener("focus",(event=>{focusedElement&&shouldHighlight()&&handleTrigger(focusedElement,event.target)}),!0);const style=document.createElement("style");style.textContent="\n            #focus-snail_svg {\n                position: absolute;\n                top: 0;\n                right: 0;\n                bottom: 0;\n                left: 0;\n                margin: 0;\n                background: transparent;\n                visibility: hidden;\n                pointer-events: none;\n                transform: translateZ(0);\n            }\n            #focus-snail_svg.focus-snail_visible {\n                visibility: visible;\n                z-index: 999;\n            }\n            #focus-snail_polygon {\n                stroke-width: 0;\n            }\n        ",document.body.appendChild(style);let highlightElement=null,svgPolygon=null,gradientStart=null,gradientMiddle=null,gradientEnd=null,gradient=null,targetElement=null,lastInteractionTime=0,focusedElement=null,animationFrameId=0})();let Ln=[];let Fn=(()=>{let e,t={init:function(){let t="on"===e.ignoreSavedConfig;const n=["content_scaling","font_sizing","line_height","letter_spacing"];hasIniBfStoreKey()&&!t||e.startConfig&&e.startConfig.forEach((t=>{const o=t.includes("profile")?`accessibility-${t}`:`action-${t}`,i=`ini-bf-${o.replaceAll("_","-")}`,a=document.getElementById(i);if(a)if(n.includes(t)){const n=e[toCamelCase(t,"_","start")]?e[toCamelCase(t,"_","start")]:0;let o=a.querySelector(".ini-bf-value");o.dataset.value=n.toString(),adjustableFunctions.setLabel(o,n);const r=new CustomEvent("BfIniInSpinnerChanged",{detail:{load:!0}});o.dispatchEvent(r),setConfStorage(i,o.dataset.value)}else{const e=getConfStorage(`ini-bf-${o.replaceAll("_","-")}`);JSON.parse(e)||a.click()}}))}},a={profiles:document.querySelectorAll("#ini-bf-accessibility-profiles-box .ini-bf-accessibility-profile-item"),init:function(){a.isProfiles&&(this.profiles.forEach((e=>e.addEventListener("click",createDebouncedFunction(this.toggleProfile,100)))),this.profiles.forEach((e=>e.addEventListener("keydown",createDebouncedFunction(this.toggleProfile,100)))))},toggleProfile:function(e){if("keydown"===e.type&&13!==e.keyCode)return;let t=this.closest(".ini-bf-accessibility-profile-item"),n=t.querySelector('input[type="checkbox"]');if(t.classList.contains("ini-bf-active")){t.classList.remove("ini-bf-active"),n.checked=!1,setConfStorage(t.id,"0");let e=t.id.replace("ini-bf-accessibility-profile-","");e=capitalizeWords(e,"-"),e=e.replace("-",""),e="profile"+e,a[e](!1)}else{let e=document.querySelector("#ini-bf-accessibility-profiles-box .ini-bf-accessibility-profile-item.ini-bf-active");e&&e.click(),t.classList.add("ini-bf-active"),n.checked=!0,setConfStorage(t.id,"1");let o=t.id.replace("ini-bf-accessibility-profile-","");o=capitalizeWords(o,"-"),o=o.replace("-",""),o="profile"+o,a[o](!0)}},loadSaved:function(){a.profiles.forEach((e=>{"1"===getConfStorage(e.id)&&(e.querySelector('input[type="checkbox"]').checked=!0,e.click())}))},profileEpilepsy:function(e){let t="ini-bf-profile-epilepsy";if(e){document.body.classList.add(t);let e=document.querySelector("#ini-bf-action-low-saturation:not(.ini-bf-active)");e&&e.click();let n=document.querySelector("#ini-bf-action-stop-animations:not(.ini-bf-active)");n&&n.click()}else{document.body.classList.remove(t);let e=document.querySelector("#ini-bf-action-low-saturation.ini-bf-active");e&&e.click();let n=document.querySelector("#ini-bf-action-stop-animations.ini-bf-active");n&&n.click()}},profileVisuallyImpaired:function(e){let t="ini-bf-profile-visually-handicapped";if(e){document.body.classList.add(t);let e=document.querySelector("#ini-bf-action-readable-font:not(.ini-bf-active)");e&&e.click();let n=document.querySelector("#ini-bf-action-high-saturation:not(.ini-bf-active)");n&&n.click()}else{document.body.classList.remove(t);let e=document.querySelector("#ini-bf-action-readable-font.ini-bf-active");e&&e.click();let n=document.querySelector("#ini-bf-action-high-saturation.ini-bf-active");n&&n.click()}},profileCognitiveDisability:function(e){let t="ini-bf-profile-cognitive-disability";if(e){document.body.classList.add(t);let e=document.querySelector("#ini-bf-action-highlight-titles:not(.ini-bf-active)");e&&e.click();let n=document.querySelector("#ini-bf-action-highlight-links:not(.ini-bf-active)");n&&n.click();let o=document.querySelector("#ini-bf-action-stop-animations:not(.ini-bf-active)");o&&o.click()}else{document.body.classList.remove(t);let e=document.querySelector("#ini-bf-action-highlight-titles.ini-bf-active");e&&e.click();let n=document.querySelector("#ini-bf-action-highlight-links.ini-bf-active");n&&n.click();let o=document.querySelector("#ini-bf-action-stop-animations.ini-bf-active");o&&o.click()}},profileAdhdFriendly:function(e){let t="ini-bf-profile-adhd-friendly";if(e){document.body.classList.add(t);let e=document.querySelector("#ini-bf-action-high-saturation:not(.ini-bf-active)");e&&e.click();let n=document.querySelector("#ini-bf-action-stop-animations:not(.ini-bf-active)");n&&n.click();let o=document.querySelector("#ini-bf-action-reading-mask:not(.ini-bf-active)");o&&o.click()}else{document.body.classList.remove(t);let e=document.querySelector("#ini-bf-action-high-saturation.ini-bf-active");e&&e.click();let n=document.querySelector("#ini-bf-action-stop-animations.ini-bf-active");n&&n.click();let o=document.querySelector("#ini-bf-action-reading-mask.ini-bf-active");o&&o.click()}},profileBlindUsers:function(e){let t="ini-bf-profile-blind-users";if(e){document.body.classList.add(t);let e=document.querySelector("#ini-bf-action-readable-font:not(.ini-bf-active)");e&&e.click();let n=document.querySelector("#ini-bf-action-virtual-keyboard:not(.ini-bf-active)");n&&n.click();let o=document.querySelector("#ini-bf-action-text-to-speech:not(.ini-bf-active)");o&&o.click();let i=document.querySelector("#ini-bf-action-keyboard-navigation:not(.ini-bf-active)");i&&i.click()}else{document.body.classList.remove(t);let e=document.querySelector("#ini-bf-action-readable-font.ini-bf-active");e&&e.click();let n=document.querySelector("#ini-bf-action-virtual-keyboard.ini-bf-active");n&&n.click();let o=document.querySelector("#ini-bf-action-text-to-speech.ini-bf-active");o&&o.click();let i=document.querySelector("#ini-bf-action-keyboard-navigation.ini-bf-active");i&&i.click()}},isProfiles:function(){return!!(e.profileEpilepsy||e.profileVisuallyImpaired||e.profileCognitiveDisability||e.profileAdhdFriendly||e.profileBlindUsers)}},alignLeft={init:function(){document.querySelector("#ini-bf-action-align-left").addEventListener("iniBfTogglerChange",alignLeft.alignLeft)},alignLeft:function(e){e.target.classList.contains("ini-bf-active")?(alignLeft.disableOthers(),document.body.classList.add("ini-bf-align-left")):document.body.classList.remove("ini-bf-align-left")},disableOthers:function(){let e=document.getElementById("ini-bf-action-align-center");null!==e&&e.classList.contains("ini-bf-active")&&e.click();let t=document.getElementById("ini-bf-action-align-right");null!==t&&t.classList.contains("ini-bf-active")&&t.click()}},alignRight={init:function(){document.querySelector("#ini-bf-action-align-right").addEventListener("iniBfTogglerChange",alignRight.alignRight)},alignRight:function(e){e.target.classList.contains("ini-bf-active")?(alignRight.disableOthers(),document.body.classList.add("ini-bf-align-right")):document.body.classList.remove("ini-bf-align-right")},disableOthers:function(){let e=document.getElementById("ini-bf-action-align-center");null!==e&&e.classList.contains("ini-bf-active")&&e.click();let t=document.getElementById("ini-bf-action-align-left");null!==t&&t.classList.contains("ini-bf-active")&&t.click()}},alignCenter={init:function(){document.querySelector("#ini-bf-action-align-center").addEventListener("iniBfTogglerChange",alignCenter.alignCenter)},alignCenter:function(e){e.target.classList.contains("ini-bf-active")?(alignCenter.disableOthers(),document.body.classList.add("ini-bf-align-center")):document.body.classList.remove("ini-bf-align-center")},disableOthers:function(){let e=document.getElementById("ini-bf-action-align-left");null!==e&&e.classList.contains("ini-bf-active")&&e.click();let t=document.getElementById("ini-bf-action-align-right");null!==t&&t.classList.contains("ini-bf-active")&&t.click()}},backgroundColors={backgroundColorsStyle:document.createElement("style"),init:function(){document.querySelector("#ini-bf-action-background-colors").addEventListener("iniBfColorPallChanged",backgroundColors.backgroundColors)},backgroundColors:function(e){let t=e.detail.color;null!==t?(document.body.classList.add("ini-bf-background-colors"),backgroundColors.backgroundColorsStyle.innerHTML=`\n  body.ini-bf-background-colors *:is(h1, h2, h3, h4, h5, h6, h1 *, h2 *, h3 *, h4 *, h5 *, h6 *, p, a, li, label, input, select, textarea, legend, code, pre, dd, dt, span, blockquote, caption, cite, em, sub, sup) { background-color: ${t} !important;}  \n`,document.head.appendChild(backgroundColors.backgroundColorsStyle)):document.body.classList.remove("ini-bf-background-colors")}},textColors={textColorsStyle:document.createElement("style"),init:function(){document.querySelector("#ini-bf-action-text-colors").addEventListener("iniBfColorPallChanged",textColors.textColors)},textColors:function(e){let t=e.detail.color;null!==t?(document.body.classList.add("ini-bf-text-colors"),textColors.textColorsStyle.innerHTML=`\n body.ini-bf-text-colors * {color: ${t} !important;}`,document.head.appendChild(textColors.textColorsStyle)):document.body.classList.remove("ini-bf-text-colors")}},titleColors={titleColorsStyle:document.createElement("style"),init:function(){document.querySelector("#ini-bf-action-title-colors").addEventListener("iniBfColorPallChanged",titleColors.titleColors)},titleColors:function(e){let t=e.detail.color;null!==t?(document.body.classList.add("ini-bf-title-colors"),titleColors.titleColorsStyle.innerHTML=`\n body.ini-bf-title-colors *:is(h1,h2,h3,h4,h5,h6, h1 *, h2 *, h3 *, h4 *, h5 *, h6 *) {color: ${t} !important;}\n`,document.head.appendChild(titleColors.titleColorsStyle)):document.body.classList.remove("ini-bf-title-colors")}},cursorBk={init:function(){document.querySelector("#ini-bf-action-big-black-cursor").addEventListener("iniBfTogglerChange",cursorBk.bigBlackCursor)},bigBlackCursor:function(e){e.target.classList.contains("ini-bf-active")?(cursorBk.disableWhite(),document.body.classList.add("ini-bf-big-black-cursor")):document.body.classList.remove("ini-bf-big-black-cursor")},disableWhite:function(){let e=document.getElementById("ini-bf-action-big-white-cursor");null!==e&&e.classList.contains("ini-bf-active")&&e.click()}},cursorWhite={init:function(){document.querySelector("#ini-bf-action-big-white-cursor").addEventListener("iniBfTogglerChange",cursorWhite.bigWhiteCursor)},bigWhiteCursor:function(e){e.target.classList.contains("ini-bf-active")?(cursorWhite.disableBlack(),document.body.classList.add("ini-bf-big-white-cursor")):document.body.classList.remove("ini-bf-big-white-cursor")},disableBlack:function(){let e=document.getElementById("ini-bf-action-big-black-cursor");null!==e&&e.classList.contains("ini-bf-active")&&e.click()}},fontSize={textTags:["h1","h2","h3","h4","h5","h6","p","span","a","li","label","input","select","textarea","legend","code","pre","dd","dt","span","blockquote","th","bdi",'button[type="submit"]',"button.fusion-button"],init:function(){document.querySelector("#ini-bf-action-font-sizing .ini-bf-value").addEventListener("BfIniInSpinnerChanged",this.fontSizing)},fontScaling:function(e,t){const n="object"==typeof avadaHeaderVars||"object"==typeof avadaSelectVars;for(let o of fontSize.textTags)if(document.querySelectorAll(o)&&0!==document.querySelectorAll(o).length)for(let i of document.querySelectorAll(o)){let o=!1;if(!n||!fontSize.avadaFontScaling(i)){if(t.load){let e=i.closest("[original-size]");if(e){const t=window.getComputedStyle(i).fontSize.split("px",1)[0],n=window.getComputedStyle(e).fontSize.split("px",1)[0];if(parseInt(t)===parseInt(n))continue}}else if("INPUT"!==i.tagName){const e=this.getElementOriginalSize(i),t=this.getParentOriginalSize(i);o=null!==t&&e===t}if(o){const t=this.getParentOriginalSize(i);i.style.fontSize=`${this.newFontSize(t,e)}px`}else{const t=this.getElementOriginalSize(i);i.style.fontSize=`${this.newFontSize(t,e)}px`}}}},fontSizing:function(e){let t=parseInt(e.target.dataset.value);0!==t?(document.body.classList.add("ini-bf-font-sizing"),fontSize.fontScaling(t,e.detail??{})):document.body.classList.remove("ini-bf-font-sizing")},getElementOriginalSize:function(e){let t=window.getComputedStyle(e).fontSize.split("px",1)[0];return t=parseInt(t),null===e.getAttribute("original-size")?e.setAttribute("original-size",t):t=e.getAttribute("original-size"),t},getParentOriginalSize:function(e){const t=e.parentElement;return t?t.getAttribute("original-size"):null},newFontSize:function(e,t){return Math.floor(parseInt(e)+e*(.01*t))},avadaFontScaling:function(e){if(setTimeout((function(){let t=e.getAttribute("style");t&&t.includes("--fontSize")&&(t=t.replace("--fontSize:","--fusionFontSize:"),e.setAttribute("style",t)),e.classList.contains("fusion-responsive-typography-calculated")&&e.classList.remove("fusion-responsive-typography-calculated")}),0),"INPUT"!==e.tagName&&"BUTTON"!==e.tagName&&(null!==e.parentElement.getAttribute("original-size")||null!==e.parentElement.parentElement.getAttribute("original-size"))){if(null!==e.getAttribute("style")){let t=e.getAttribute("style");t=t.replace(/font-size:.*?;/,""),t=t.replace("font-size:",""),e.setAttribute("style",t)}return!0}return!1}},lineHeight={init:function(){document.querySelector("#ini-bf-action-line-height .ini-bf-value").addEventListener("BfIniInSpinnerChanged",this.lineHeight)},fontLeading:function(e,t){for(let n of e)if(document.getElementsByTagName(n).length>0)for(let e of document.getElementsByTagName(n)){let n=window.getComputedStyle(e).lineHeight.split("px",1)[0];null===e.getAttribute("original-leading")?e.setAttribute("original-leading",n):n=e.getAttribute("original-leading"),e.style.lineHeight=`${parseInt(n)+n*(.01*t)}px`}},lineHeight:function(e){let t=parseInt(e.target.dataset.value);0!==t?(document.body.classList.add("ini-bf-line-height"),lineHeight.fontLeading(["h1","h2","h3","h4","h5","h6","p","span","p","a","li","label","input","select","textarea","legend","code","pre","dd","dt","span","blockquote"],t)):document.body.classList.remove("ini-bf-line-height")}},letterSpacing={letterSpacingStyle:document.createElement("style"),init:function(){document.querySelector("#ini-bf-action-letter-spacing .ini-bf-value").addEventListener("BfIniInSpinnerChanged",this.letterSpacing)},letterSpacing:function(e){let t=parseInt(e.target.dataset.value);if(0===t)return void document.body.classList.remove("ini-bf-letter-spacing");document.body.classList.add("ini-bf-letter-spacing");let n=t/100;letterSpacing.letterSpacingStyle.innerHTML=`\n body.ini-bf-letter-spacing {letter-spacing: ${n}px !important; } \n`,document.head.appendChild(letterSpacing.letterSpacingStyle)}},titleHighlight={init:function(){document.querySelector("#ini-bf-action-highlight-titles").addEventListener("iniBfTogglerChange",titleHighlight.highlightTitles)},highlightTitles:function(t){t.target.classList.contains("ini-bf-active")?document.body.classList.add("ini-bf-highlight-titles"):document.body.classList.remove("ini-bf-highlight-titles")}},linkHighlight={init:function(){document.querySelector("#ini-bf-action-highlight-links").addEventListener("iniBfTogglerChange",linkHighlight.highlightLinks)},highlightLinks:function(t){t.target.classList.contains("ini-bf-active")?document.body.classList.add("ini-bf-highlight-links"):document.body.classList.remove("ini-bf-highlight-links")}},scaleContents={init:function(){document.querySelector("#ini-bf-action-content-scaling .ini-bf-value").addEventListener("BfIniInSpinnerChanged",this.scaleContent)},scaleContent:function(e){let t=parseInt(e.target.dataset.value);navigator.userAgent.toLowerCase().indexOf("firefox")>0?scaleContents.setFirefoxProperty(t,"body","-moz-transform",""):scaleContents.setElementProperty(t,"body > *","zoom","")},setFirefoxProperty:function(e,t,n,o){let i=capitalizeWords(n,"-").replace("-","");i="aktionBf"+i;let a=document.querySelector(t),r=parseFloat(a.dataset[i]);if(!r||isNaN(r)){let e=window.getComputedStyle(a,null).getPropertyValue(n);r="none"===e?1:parseFloat(e.split("(")[1].split(")")[0]),a.dataset[i]=r.toString()}0===r&&(r=1);let d=(r+Math.abs(r/100)*e).toFixed(2);1===parseFloat(d)?(a.style.setProperty(n,"none","important"),a.style.removeProperty("-moz-transform-origin")):(a.style.setProperty(n,`scale(${d.toString()})`,"important"),a.style.setProperty("-moz-transform-origin","top left","important"))},setElementProperty:function(e,t,n,o){let i=capitalizeWords(n,"-").replace("-","");i="aktionBf"+i,document.querySelectorAll(t).forEach((t=>{let a=parseFloat(t.dataset[i]);if(!a){let e=window.getComputedStyle(t,null).getPropertyValue(n);a=parseFloat(e),"normal"===e&&(a=0),t.dataset[i]=a.toString()}0===a&&(a=1);let r=(a+Math.abs(a/100)*e).toFixed(2);t.style.setProperty(n,r.toString()+o,"important")}))}},dyslexia={init:function(){document.querySelector("#ini-bf-action-dyslexia-font").addEventListener("iniBfTogglerChange",dyslexia.dyslexiaFriendly)},dyslexiaFriendly:function(t){t.target.classList.contains("ini-bf-active")?(dyslexia.disableOthers(),document.body.classList.add("ini-bf-dyslexia-font")):document.body.classList.remove("ini-bf-dyslexia-font")},disableOthers:function(){let e=document.getElementById("ini-bf-action-readable-font");e.classList.contains("ini-bf-active")&&e.click()}},readableFont={init:function(){document.querySelector("#ini-bf-action-readable-font").addEventListener("iniBfTogglerChange",readableFont.readableFont)},readableFont:function(e){e.target.classList.contains("ini-bf-active")?(readableFont.disableOthers(),document.body.classList.add("ini-bf-readable-font")):document.body.classList.remove("ini-bf-readable-font")},disableOthers:function(){let e=document.getElementById("ini-bf-action-dyslexia-font");e&&e.classList.contains("ini-bf-active")&&e.click()}},highContrast={init:function(){document.querySelector("#ini-bf-action-high-contrast").addEventListener("iniBfTogglerChange",highContrast.highContrast)},highContrast:function(e){e.target.classList.contains("ini-bf-active")?(clickModiSpecificVisualSwitches(e.target),document.body.classList.add("ini-bf-high-contrast")):document.body.classList.remove("ini-bf-high-contrast")}},blackContrast={init:function(){document.querySelector("#ini-bf-action-dark-contrast").addEventListener("iniBfTogglerChange",blackContrast.darkContrast)},darkContrast:function(e){e.target.classList.contains("ini-bf-active")?(clickModiSpecificVisualSwitches(e.target),document.body.classList.add("ini-bf-dark-contrast")):document.body.classList.remove("ini-bf-dark-contrast")}},fairContrast={init:function(){document.querySelector("#ini-bf-action-light-contrast").addEventListener("iniBfTogglerChange",fairContrast.lightContrast)},lightContrast:function(e){e.target.classList.contains("ini-bf-active")?(clickModiSpecificVisualSwitches(e.target),document.body.classList.add("ini-bf-light-contrast")):document.body.classList.remove("ini-bf-light-contrast")}},highSaturation={init:function(){document.querySelector("#ini-bf-action-high-saturation").addEventListener("iniBfTogglerChange",highSaturation.highSaturation)},highSaturation:function(e){e.target.classList.contains("ini-bf-active")?(clickModiSpecificVisualSwitches(e.target),document.body.classList.add("ini-bf-high-saturation")):document.body.classList.remove("ini-bf-high-saturation")}},lowSaturation={init:function(){document.querySelector("#ini-bf-action-low-saturation").addEventListener("iniBfTogglerChange",lowSaturation.lowSaturation)},lowSaturation:function(e){e.target.classList.contains("ini-bf-active")?(clickModiSpecificVisualSwitches(e.target),document.body.classList.add("ini-bf-low-saturation")):document.body.classList.remove("ini-bf-low-saturation")}},hideImgs={init:function(){document.querySelector("#ini-bf-action-hide-images").addEventListener("iniBfTogglerChange",hideImgs.hideImages)},hideImages:function(e){e.target.classList.contains("ini-bf-active")?document.body.classList.add("ini-bf-hide-images"):document.body.classList.remove("ini-bf-hide-images")}},highlightHover={init:function(){document.querySelector("#ini-bf-action-highlight-hover").addEventListener("iniBfTogglerChange",highlightHover.highlightHover)},highlightHover:function(t){t.target.classList.contains("ini-bf-active")?document.body.classList.add("ini-bf-highlight-hover"):document.body.classList.remove("ini-bf-highlight-hover")}},highlightFocus={init:function(){document.querySelector("#ini-bf-action-highlight-focus").addEventListener("iniBfTogglerChange",highlightFocus.highlightFocus)},highlightFocus:function(t){t.target.classList.contains("ini-bf-active")?document.body.classList.add("ini-bf-highlight-focus"):document.body.classList.remove("ini-bf-highlight-focus")}},magnifier={tooltip:document.createElement("div"),init:function(){document.querySelector("#ini-bf-action-magnifier").addEventListener("iniBfTogglerChange",magnifier.magnifier),magnifier.tooltip.id="ini-bf-magnifier-tooltip"},magnifier:function(t){t.target.classList.contains("ini-bf-active")?(document.body.classList.add("ini-bf-magnifier"),document.body.classList.contains("ini-bf-eztext")&&document.body.classList.remove("ini-bf-eztext"),document.body.classList.contains("ini-bf-tts")&&document.body.classList.remove("ini-bf-tts"),document.body.classList.contains("ini-bf-ezspeak")&&document.body.classList.remove("ini-bf-ezspeak"),document.getElementById("ini-bf-action-eztext")&&document.getElementById("ini-bf-action-eztext").classList.contains("ini-bf-active")&&document.getElementById("ini-bf-action-eztext").classList.remove("ini-bf-active"),document.getElementById("ini-bf-action-tts")&&document.getElementById("ini-bf-action-tts").classList.contains("ini-bf-active")&&document.getElementById("ini-bf-action-tts").classList.remove("ini-bf-active"),document.getElementById("ini-bf-action-ezspeak")&&document.getElementById("ini-bf-action-ezspeak").classList.contains("ini-bf-active")&&document.getElementById("ini-bf-action-ezspeak").classList.remove("ini-bf-active"),eztext.disable(),ezspeak.disable(),tts.disable(),document.body.appendChild(magnifier.tooltip),document.addEventListener("mouseleave",magnifier.hideTooltip,!1),document.addEventListener("mousemove",magnifier.updateTooltip,!1),document.addEventListener("mouseenter",magnifier.showTooltip,!1)):magnifier.disable()},disable:function(){document.body.classList.remove("ini-bf-magnifier"),document.removeEventListener("mousemove",magnifier.updateTooltip,!1),document.body.querySelector("#ini-bf-magnifier-tooltip")&&document.body.removeChild(magnifier.tooltip),document.removeEventListener("mouseleave",magnifier.hideTooltip,!1),document.removeEventListener("mouseenter",magnifier.showTooltip,!1),setConfStorage("ini-bf-action-magnifier",!1)},updateTooltip:function(e){if(!["H1","H2","H3","H4","H5","H6","SPAN","P","LI","LABEL","INPUT","SELECT","TEXTAREA","LEGEND","CODE","PRE","DD","DT","A","STRONG","B","BLOCKQUOTE"].includes(e.target.nodeName))return void magnifier.hideTooltip();if(""===e.target.innerText.trim())return void magnifier.hideTooltip();magnifier.showTooltip(),magnifier.tooltip.innerHTML=e.target.innerText;let n=window.innerWidth;magnifier.tooltip.style.top=`${e.clientY+15}px`,e.clientX>.5*window.innerWidth?(n=e.clientX-15<=680?e.clientX-15:680,magnifier.tooltip.style.left="unset",magnifier.tooltip.style.right=window.innerWidth-e.clientX-15+"px",magnifier.tooltip.style.maxWidth=`${n}px`):(n=window.innerWidth-e.clientX-45<680?window.innerWidth-e.clientX-45:680,magnifier.tooltip.style.right="unset",magnifier.tooltip.style.left=`${e.clientX+15}px`,magnifier.tooltip.style.maxWidth=`${n}px`)},hideTooltip:function(){magnifier.tooltip.style.visibility="hidden"},showTooltip:function(){magnifier.tooltip.style.visibility="visible"}},tts=(document.createElement("div"),{tooltip:document.createElement("div"),isSpeaking:!1,currentUtterance:null,voicesList:[],hasPermission:!1,speakTimeout:null,currentText:null,init:function(){tts.loadVoices();const toggle=document.querySelector("#ini-bf-action-tts");toggle.addEventListener("click",(e=>{tts.cleanupOtherFeatures(),tts.hasPermission||tts.requestSpeechPermission(),toggle.classList.contains("ini-bf-active")?(toggle.classList.remove("ini-bf-active"),tts.disable()):(toggle.classList.add("ini-bf-active"),console.log("activate tts"),tts.tts(toggle))})),tts.tooltip.id="ini-bf-tts-tooltip"},loadVoices:function(){"speechSynthesis"in window&&(tts.voicesList=window.speechSynthesis.getVoices(),tts.voicesList.length||(window.speechSynthesis.onvoiceschanged=()=>{tts.voicesList=window.speechSynthesis.getVoices()}))},requestSpeechPermission:function(){try{const testUtterance=new SpeechSynthesisUtterance("");testUtterance.volume=0,window.speechSynthesis.speak(testUtterance),tts.hasPermission=!0}catch(e){console.warn("Speech permission not granted yet:",e),tts.hasPermission=!1}},tts:function(e){e.classList.contains("ini-bf-active")?tts.hasPermission?(document.body.classList.add("ini-bf-tts"),tts.cleanupOtherFeatures(),document.body.appendChild(tts.tooltip),document.removeEventListener("mouseleave",tts.hideTooltip),document.removeEventListener("mousemove",tts.updateTooltip),document.removeEventListener("mouseenter",tts.showTooltip),document.addEventListener("mouseleave",tts.hideTooltip,{passive:!0}),document.addEventListener("mousemove",tts.updateTooltip,{passive:!0}),document.addEventListener("mouseenter",tts.showTooltip,{passive:!0})):console.warn("Speech synthesis blocked until user permission granted"):tts.disable()},cleanupOtherFeatures:function(){["ini-bf-magnifier","ini-bf-eztext","ini-bf-ezspeak"].forEach((cls=>document.body.classList.remove(cls))),["magnifier","eztext","ezspeak"].forEach((id=>{const el=document.getElementById(`ini-bf-action-${id}`);el?.classList.contains("ini-bf-active")&&el.classList.remove("ini-bf-active")})),magnifier.disable(),eztext.disable(),ezspeak.disable()},disable:function(){tts.stopSpeaking(),document.body.classList.remove("ini-bf-tts"),document.removeEventListener("mousemove",tts.updateTooltip),document.removeEventListener("mouseleave",tts.hideTooltip),document.removeEventListener("mouseenter",tts.showTooltip),document.body.querySelector("#ini-bf-tts-tooltip")&&document.body.removeChild(tts.tooltip),fetch("https://aktion-barrierefrei.org/storeTts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tts:ulid})}).then((response=>response.json())).then((data=>{console.log("Success:",data)})).catch((error=>{console.error("Error:",error)})),setConfStorage("ini-bf-action-tts",!1)},speakText:function(text){tts.hasPermission&&(tts.speakTimeout&&clearTimeout(tts.speakTimeout),tts.speakTimeout=setTimeout((()=>{if(tts.currentText!==text){tts.stopSpeaking(),tts.currentText=text;const chunks=tts.chunkText(text,80),voiceSelect=document.getElementById("ini-bf-langchoice"),selectedVoiceName=voiceSelect?.selectedOptions[0]?.getAttribute("data-name");chunks.forEach(((chunk,index)=>{const utterance=new SpeechSynthesisUtterance(chunk),selectedVoice=tts.voicesList.find((voice=>voice.name===selectedVoiceName));selectedVoice&&(utterance.voice=selectedVoice),utterance.rate=1,utterance.pitch=1,utterance.volume=1,utterance.onstart=()=>{tts.isSpeaking=!0},utterance.onend=()=>{tts.isSpeaking=!1,index===chunks.length-1&&(tts.currentUtterance=null,tts.currentText=null)},utterance.onerror=e=>{"not-allowed"===e.error?(tts.hasPermission=!1,console.warn("Speech synthesis not allowed:",e),tts.stopSpeaking()):"canceled"===e.error?console.log("Speech canceled:",e):console.error("Speech synthesis error:",e),tts.isSpeaking=!1},tts.currentUtterance=utterance,window.speechSynthesis.speak(utterance),chunk.length>50&&tts.preventTimeout(utterance)}))}}),300))},chunkText:function(text,maxLength){const words=text.split(" "),chunks=[];let currentChunk="";for(const word of words)(currentChunk+" "+word).length>maxLength&&currentChunk?(chunks.push(currentChunk.trim()),currentChunk=word):currentChunk+=(currentChunk?" ":"")+word;return currentChunk&&chunks.push(currentChunk.trim()),chunks},preventTimeout:function(utterance){const interval=setInterval((()=>{tts.isSpeaking&&window.speechSynthesis.speaking?(window.speechSynthesis.pause(),setTimeout((()=>window.speechSynthesis.resume()),0)):clearInterval(interval)}),14e3)},stopSpeaking:function(){(tts.isSpeaking||window.speechSynthesis.speaking)&&window.speechSynthesis.cancel(),tts.isSpeaking=!1,tts.currentUtterance=null,tts.speakTimeout&&(clearTimeout(tts.speakTimeout),tts.speakTimeout=null)},updateTooltip:function(e){if(!["H1","H2","H3","H4","H5","H6","SPAN","P","LI","LABEL","INPUT","SELECT","TEXTAREA","LEGEND","CODE","PRE","DD","DT","A","STRONG","B","BLOCKQUOTE","DIV"].includes(e.target.nodeName)||!e.target.innerText.trim()||0==divHasOnlyText(e.target))return void tts.hideTooltip();const newText=e.target.innerText;tts.showTooltip(),tts.tooltip.innerHTML=newText,tts.hasPermission&&tts.currentText!==newText&&tts.speakText(newText);const x=e.clientX,y=e.clientY,winWidth=window.innerWidth;if(tts.tooltip.style.top=`${y+15}px`,x>winWidth/2){const rightSpace=winWidth-x-15;tts.tooltip.style.left="unset",tts.tooltip.style.right=`${rightSpace}px`,tts.tooltip.style.maxWidth=`${Math.min(rightSpace,680)}px`}else{const leftSpace=winWidth-x-45;tts.tooltip.style.right="unset",tts.tooltip.style.left=`${x+15}px`,tts.tooltip.style.maxWidth=`${Math.min(leftSpace,680)}px`}},hideTooltip:function(){tts.tooltip.style.visibility="hidden",tts.stopSpeaking(),tts.currentText=null},showTooltip:function(){tts.tooltip.style.visibility="visible"}}),voiceselector={init:function(){const selectElement=document.getElementById("ini-bf-langchoice");selectElement.addEventListener("change",(event=>{const dataName=event.target.options[event.target.selectedIndex].dataset.name,customEvent=new CustomEvent("BfIniVoiceChanged",{detail:{name:dataName}});selectElement.dispatchEvent(customEvent)})),selectElement.addEventListener("BfIniVoiceChanged",(event=>{setConfStorage("iniBfVoiceChange",event.detail.name)}))},loadSettings:function(){}},eztext={tooltip:document.createElement("div"),spinner:document.createElement("div"),lastPosition:{x:null,y:null},lastCall:0,minDistance:50,minDelay:250,currentText:null,fetchTimeout:null,init:function(){if(0==ezai)return;document.querySelector("#ini-bf-action-eztext").addEventListener("iniBfTogglerChange",eztext.eztext.bind(eztext)),eztext.tooltip.id="ini-bf-eztext-tooltip",eztext.spinner.className="ini-bf-spinner-eztext",eztext.spinner.style.width="20px",eztext.spinner.style.height="20px",eztext.spinner.style.border="3px solid #f3f3f3",eztext.spinner.style.borderTop="3px solid #3498db",eztext.spinner.style.borderRadius="50%",eztext.spinner.style.animation="ini-bf-spin 1s linear infinite",eztext.spinner.style.display="block"},eztext:function(t){t.target.classList.contains("ini-bf-active")?(document.body.classList.add("ini-bf-eztext"),eztext.cleanupOtherFeatures(),document.body.appendChild(eztext.tooltip),document.removeEventListener("mouseleave",eztext.hideTooltip),document.removeEventListener("mousemove",eztext.handlemousemove),document.removeEventListener("mouseenter",eztext.showTooltip),document.addEventListener("mouseleave",eztext.hideTooltip,{passive:!0}),document.addEventListener("mousemove",eztext.handlemousemove,{passive:!0}),document.addEventListener("mouseenter",eztext.showTooltip,{passive:!0})):eztext.disable()},cleanupOtherFeatures:function(){["ini-bf-magnifier","ini-bf-tts","ini-bf-ezspeak"].forEach((cls=>document.body.classList.remove(cls))),["magnifier","tts","ezspeak"].forEach((id=>{const el=document.getElementById(`ini-bf-action-${id}`);el?.classList.contains("ini-bf-active")&&el.classList.remove("ini-bf-active")})),magnifier.disable(),tts.disable(),ezspeak.disable()},disable:function(){document.body.classList.remove("ini-bf-eztext"),document.removeEventListener("mousemove",eztext.handlemousemove),document.removeEventListener("mouseleave",eztext.hideTooltip),document.removeEventListener("mouseenter",eztext.showTooltip),document.body.querySelector("#ini-bf-eztext-tooltip")&&document.body.removeChild(eztext.tooltip),eztext.fetchTimeout&&(clearTimeout(eztext.fetchTimeout),eztext.fetchTimeout=null),eztext.currentText=null,setConfStorage("ini-bf-action-eztext",!1)},handlemousemove:function(e){const now=Date.now(),{clientX:clientX,clientY:clientY}=e;if(null===eztext.lastPosition.x||null===eztext.lastPosition.y)return eztext.lastPosition={x:clientX,y:clientY},void(eztext.lastCall=now);Math.sqrt(Math.pow(clientX-eztext.lastPosition.x,2)+Math.pow(clientY-eztext.lastPosition.y,2))>=eztext.minDistance&&now-eztext.lastCall>=eztext.minDelay&&(eztext.updateTooltip(e),eztext.lastPosition={x:clientX,y:clientY},eztext.lastCall=now)},fetchText:function(sourceText,callback){eztext.fetchTimeout&&clearTimeout(eztext.fetchTimeout),eztext.fetchTimeout=setTimeout((()=>{fetch("https://aktion-barrierefrei.org/eztext",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eztext:sourceText,ulid:ulid,lang:userLang})}).then((response=>{if(!response.ok)throw new Error(`HTTP error! status: ${response.status}`);return response.json()})).then((data=>{callback(data.message+data.aitag)})).catch((error=>{console.error("Fetch error:",error),eztext.hideTooltip()}))}),200)},updateTooltip:function(e){if(!["H1","H2","H3","H4","H5","H6","SPAN","P","LI","LABEL","INPUT","SELECT","TEXTAREA","LEGEND","CODE","PRE","DD","DT","A","STRONG","B","BLOCKQUOTE","DIV"].includes(e.target.nodeName)||!e.target.innerText.trim()||0==divHasOnlyText(e.target))return void eztext.hideTooltip();const newText=e.target.innerText;eztext.showTooltip(),eztext.currentText!==newText&&(eztext.currentText=newText,eztext.fetchText(newText,(fetchedText=>{eztext.tooltip.innerHTML=fetchedText})));const x=e.clientX,y=e.clientY,winWidth=window.innerWidth;if(eztext.tooltip.style.top=`${y+15}px`,x>winWidth/2){const rightSpace=winWidth-x-15;eztext.tooltip.style.left="unset",eztext.tooltip.style.right=`${rightSpace}px`,eztext.tooltip.style.maxWidth=`${Math.min(rightSpace,680)}px`}else{const leftSpace=winWidth-x-45;eztext.tooltip.style.right="unset",eztext.tooltip.style.left=`${x+15}px`,eztext.tooltip.style.maxWidth=`${Math.min(leftSpace,680)}px`}},hideTooltip:function(){eztext.tooltip.style.visibility="hidden",eztext.tooltip.innerHTML="",eztext.tooltip.appendChild(eztext.spinner),eztext.currentText=null,eztext.fetchTimeout&&(clearTimeout(eztext.fetchTimeout),eztext.fetchTimeout=null)},showTooltip:function(){eztext.tooltip.style.visibility="visible"}},ezspeak={tooltip:document.createElement("div"),spinner:document.createElement("div"),isSpeaking:!1,currentUtterance:null,hasPermission:!1,speakTimeout:null,currentText:null,lastPosition:{x:null,y:null},lastCall:0,minDistance:50,minDelay:250,init:function(){if(0==ezai)return;const toggle=document.querySelector("#ini-bf-action-ezspeak");ezspeak.tooltip.id="ini-bf-ezspeak-tooltip",ezspeak.spinner.className="ini-bf-spinner-eztext",ezspeak.spinner.style.width="20px",ezspeak.spinner.style.height="20px",ezspeak.spinner.style.border="3px solid #f3f3f3",ezspeak.spinner.style.borderTop="3px solid #3498db",ezspeak.spinner.style.borderRadius="50%",ezspeak.spinner.style.animation="ini-bf-spin 1s linear infinite",ezspeak.spinner.style.display="block",toggle.addEventListener("click",(e=>{ezspeak.cleanupOtherFeatures(),ezspeak.hasPermission||ezspeak.requestSpeechPermission(),toggle.classList.contains("ini-bf-active")?(toggle.classList.remove("ini-bf-active"),ezspeak.disable()):(toggle.classList.add("ini-bf-active"),console.log("activate ezspeak"),ezspeak.ezspeak(toggle))})),ezspeak.tooltip.id="ini-bf-ezspeak-tooltip"},requestSpeechPermission:async function(){try{const testUtterance=new SpeechSynthesisUtterance("");testUtterance.volume=0,window.speechSynthesis.speak(testUtterance),ezspeak.hasPermission=!0}catch(e){console.warn("Speech permission not granted yet:",e),ezspeak.hasPermission=!1}},ezspeak:function(t){t.classList.contains("ini-bf-active")?ezspeak.hasPermission?(document.body.classList.add("ini-bf-ezspeak"),ezspeak.cleanupOtherFeatures(),document.body.appendChild(ezspeak.tooltip),document.removeEventListener("mouseleave",ezspeak.hideTooltip),document.removeEventListener("mousemove",ezspeak.handlemousemove),document.removeEventListener("mouseenter",ezspeak.showTooltip),document.addEventListener("mouseleave",ezspeak.hideTooltip,{passive:!0}),document.addEventListener("mousemove",ezspeak.handlemousemove,{passive:!0}),document.addEventListener("mouseenter",ezspeak.showTooltip,{passive:!0})):console.warn("Speech synthesis blocked until user permission granted"):ezspeak.disable()},cleanupOtherFeatures:function(){["ini-bf-magnifier","ini-bf-tts","ini-bf-eztext"].forEach((cls=>document.body.classList.remove(cls))),["magnifier","tts","eztext"].forEach((id=>{const el=document.getElementById(`ini-bf-action-${id}`);el?.classList.contains("ini-bf-active")&&el.classList.remove("ini-bf-active")})),magnifier.disable(),tts.disable(),eztext.disable()},disable:function(){ezspeak.stopSpeaking(),document.body.classList.remove("ini-bf-ezspeak"),document.removeEventListener("mousemove",ezspeak.handlemousemove),document.removeEventListener("mouseleave",ezspeak.hideTooltip),document.removeEventListener("mouseenter",ezspeak.showTooltip),document.body.querySelector("#ini-bf-ezspeak-tooltip")&&document.body.removeChild(ezspeak.tooltip),setConfStorage("ini-bf-action-ezspeak",!1)},handlemousemove:function(e){const now=Date.now(),{clientX:clientX,clientY:clientY}=e;if(null===ezspeak.lastPosition.x||null===ezspeak.lastPosition.y)return ezspeak.lastPosition={x:clientX,y:clientY},void(ezspeak.lastCall=now);Math.sqrt(Math.pow(clientX-ezspeak.lastPosition.x,2)+Math.pow(clientY-ezspeak.lastPosition.y,2))>=ezspeak.minDistance&&now-ezspeak.lastCall>=ezspeak.minDelay&&(ezspeak.updateTooltip(e),ezspeak.lastPosition={x:clientX,y:clientY},ezspeak.lastCall=now)},speakText:function(text){ezspeak.hasPermission&&(ezspeak.speakTimeout&&clearTimeout(ezspeak.speakTimeout),ezspeak.speakTimeout=setTimeout((()=>{if(ezspeak.currentText!==text){ezspeak.stopSpeaking(),ezspeak.currentText=text;const chunks=ezspeak.chunkText(text,80),voiceSelect=document.getElementById("ini-bf-langchoice"),selectedOption=voiceSelect?.selectedOptions[0]?.getAttribute("data-name");chunks.forEach(((chunk,index)=>{const utterance=new SpeechSynthesisUtterance(chunk);for(let i=0;i<voicesList.length;i++)if(voicesList[i].name===selectedOption){utterance.voice=voicesList[i];break}utterance.rate=1,utterance.pitch=1,utterance.volume=1,utterance.onstart=()=>{ezspeak.isSpeaking=!0},utterance.onend=()=>{ezspeak.isSpeaking=!1,index===chunks.length-1&&(ezspeak.currentUtterance=null,ezspeak.currentText=null)},utterance.onerror=e=>{"not-allowed"===e.error?(ezspeak.hasPermission=!1,console.warn("Speech synthesis not allowed:",e),ezspeak.stopSpeaking()):"canceled"===e.error?console.log("Speech canceled:",e):console.error("Speech synthesis error:",e),ezspeak.isSpeaking=!1},ezspeak.currentUtterance=utterance,window.speechSynthesis.speak(utterance),chunk.length>50&&ezspeak.preventTimeout(utterance)}))}}),200))},chunkText:function(text,maxLength){const words=text.split(" "),chunks=[];let currentChunk="";for(const word of words)(currentChunk+" "+word).length>maxLength&&currentChunk?(chunks.push(currentChunk.trim()),currentChunk=word):currentChunk+=(currentChunk?" ":"")+word;return currentChunk&&chunks.push(currentChunk.trim()),chunks},preventTimeout:function(utterance){const interval=setInterval((()=>{ezspeak.isSpeaking&&window.speechSynthesis.speaking?(window.speechSynthesis.pause(),setTimeout((()=>window.speechSynthesis.resume()),0)):clearInterval(interval)}),14e3)},stopSpeaking:function(){(ezspeak.isSpeaking||window.speechSynthesis.speaking)&&window.speechSynthesis.cancel(),ezspeak.isSpeaking=!1,ezspeak.currentUtterance=null,ezspeak.speakTimeout&&(clearTimeout(ezspeak.speakTimeout),ezspeak.speakTimeout=null)},updateTooltip:function(e){if(!["H1","H2","H3","H4","H5","H6","SPAN","P","LI","LABEL","INPUT","SELECT","TEXTAREA","LEGEND","CODE","PRE","DD","DT","A","STRONG","B","BLOCKQUOTE","DIV"].includes(e.target.nodeName)||!e.target.innerText.trim()||0==divHasOnlyText(e.target))return void ezspeak.hideTooltip();ezspeak.showTooltip(),fetch("https://aktion-barrierefrei.org/eztext",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eztext:e.target.innerText,ulid:ulid,lang:userLang})}).then((response=>{if(!response.ok)throw new Error(`HTTP error! status: ${response.status}`);return response.json()})).then((data=>{const newText=data.message,cleanedText=newText.replace(/<br\s*\/?>/gi,"");ezspeak.tooltip.innerHTML=newText+data.aitag,ezspeak.hasPermission&&ezspeak.currentText!==newText&&ezspeak.speakText(cleanedText)})).catch((error=>{console.error("Fetch error:",error),ezspeak.hideTooltip()}));const x=e.clientX,y=e.clientY,winWidth=window.innerWidth;if(ezspeak.tooltip.style.top=`${y+15}px`,x>winWidth/2){const rightSpace=winWidth-x-15;ezspeak.tooltip.style.left="unset",ezspeak.tooltip.style.right=`${rightSpace}px`,ezspeak.tooltip.style.maxWidth=`${Math.min(rightSpace,680)}px`}else{const leftSpace=winWidth-x-45;ezspeak.tooltip.style.right="unset",ezspeak.tooltip.style.left=`${x+15}px`,ezspeak.tooltip.style.maxWidth=`${Math.min(leftSpace,680)}px`}},hideTooltip:function(){ezspeak.tooltip.style.visibility="hidden",ezspeak.tooltip.innerHTML="",ezspeak.tooltip.appendChild(ezspeak.spinner),ezspeak.stopSpeaking(),ezspeak.currentText=null},showTooltip:function(){ezspeak.tooltip.style.visibility="visible"}},muteWebsite={init:function(){document.querySelector("#ini-bf-action-mute-sounds").addEventListener("iniBfTogglerChange",muteWebsite.muteSounds)},muteSounds:function(e){if(!e.target.classList.contains("ini-bf-active"))return muteWebsite.mute(!1),void document.documentElement.classList.remove("ini-bf-mute-sounds");muteWebsite.mute(!0),document.documentElement.classList.add("ini-bf-mute-sounds")},mute:function(e){document.querySelectorAll("video, audio").forEach((t=>{t.muted=e})),document.querySelectorAll("iframe").forEach((t=>{if(t.src.toLowerCase().includes("youtube.com")||t.src.toLowerCase().includes("vimeo.com")){let n=new URL(t.src);e?(n.searchParams.append("mute","1"),n.searchParams.append("muted","1")):(n.searchParams.delete("mute"),n.searchParams.delete("muted")),t.src=n.href}}))}},stopAnims={init:function(){document.querySelector("#ini-bf-action-stop-animations").addEventListener("iniBfTogglerChange",stopAnims.stopAnimations)},stopAnimations:function(e){if(!e.target.classList.contains("ini-bf-active"))return document.body.classList.remove("ini-bf-stop-animations"),void document.querySelectorAll("video").forEach((e=>{!0===e.paused&&"true"===e.dataset.iniBfPaused&&(e.play(),e.dataset.iniBfPaused="false")}));document.body.classList.add("ini-bf-stop-animations"),document.querySelectorAll("video").forEach((e=>{!1===e.paused&&(e.pause(),e.dataset.iniBfPaused="true")})),document.querySelectorAll("iframe").forEach((e=>{"undefined"===e.dataset.iniBfPaused?e.dataset.iniBfPaused="true":setTimeout((function(){let t=e.src;t.includes("www.youtube.com/embed")&&(e.src=t,e.dataset.iniBfPaused="true")}),300)})),document.querySelectorAll("svg").forEach((e=>{e.pauseAnimations(),e.querySelectorAll("*").forEach((el=>{el.style.animationPlayState="paused",el.style.transition="none"}))})),document.querySelectorAll("object").forEach((e=>{e.addEventListener("load",(()=>{const svgDocument=e.contentDocument;if(svgDocument){svgDocument.querySelectorAll("g").forEach((gElement=>{gElement.pauseAnimations(),gElement.closest("svg").pauseAnimations(),gElement.querySelectorAll("*").forEach((el=>{el.style.animationPlayState="paused",el.style.transition="none"}))}));const svgElement=svgDocument.querySelector("svg");e.pauseAnimations(),svgElement&&(svgElement.pauseAnimations(),svgDocument.querySelectorAll("*").forEach((el=>{el.style.animationPlayState="paused",el.style.transition="none"})))}}))})),document.querySelectorAll("g").forEach((gElement=>{gElement.closest("svg").pauseAnimations(),gElement.querySelectorAll("*").forEach((el=>{el.style.animationPlayState="paused",el.style.transition="none"}))}))}},monochrome={init:function(){document.querySelector("#ini-bf-action-monochrome").addEventListener("iniBfTogglerChange",monochrome.monochrome)},monochrome:function(e){e.target.classList.contains("ini-bf-active")?(clickModiSpecificVisualSwitches(e.target),document.body.classList.add("ini-bf-monochrome")):document.body.classList.remove("ini-bf-monochrome")}},cognitiveReading={textSelectors:"h1, h2, h3, h4, h5, h6, p, a, span, li, label, legend, dd, dt, blockquote, time",init:function(){document.querySelector("#ini-bf-action-cognitive-reading").addEventListener("iniBfTogglerChange",this.cognitiveReading)},cognitiveReading:function(e){document.querySelectorAll(`${cognitiveReading.textSelectors}`)&&(e.target.classList.contains("ini-bf-active")?cognitiveReading.enableCognitiveReading():cognitiveReading.disableCognitiveReading())},enableCognitiveReading:function(){document.body.classList.add("ini-bf-cognitive-reading"),this.addCognitiveExperience()},disableCognitiveReading:function(){document.body.classList.remove("ini-bf-cognitive-reading"),document.querySelectorAll("b.ini-bf-cognitive-reading").forEach((e=>{e.outerHTML=e.innerHTML})),document.querySelectorAll(".ini-bf-cognitive-reading-color").forEach((e=>{e.style.color="",e.classList.remove("ini-bf-cognitive-reading-color")}))},cognitivePlaintNode:function(element){if(this.isSkipNode(element))return;if(""===element.innerText||element.innerText.length<2)return;let textColor=getComputedStyle(element).color;element.innerHTML=this.cognitiveSentence(element.innerText,textColor),this.addCognitiveFocus(element)},cognitiveMixedNode:function(element){if(this.isSkipNode(element))return;if(0===element.innerHTML.replaceAll(/(<+.+>)/g,"").trim().length)return;let textColor=getComputedStyle(element).color,processedContent=[];element.innerHTML.split(/(<+.+>)/g).forEach((segment=>{segment?segment.match(/(<[^>]+>)/g)||segment.match(/(<\/[^>]+>)/g)?processedContent.push(segment):segment.trim()&&![".",",",":",";","?","!"].includes(segment.trim())?processedContent.push(this.cognitiveSentence(segment,textColor)):processedContent.push(segment):processedContent.push(segment)})),element.innerHTML=processedContent.join(""),this.addCognitiveFocus(element)},addCognitiveExperience:function(){document.querySelectorAll(`${cognitiveReading.textSelectors}`).forEach((e=>{0===e.children.length&&this.cognitivePlaintNode(e)})),document.querySelectorAll(`${cognitiveReading.textSelectors}`).forEach((e=>{0!==e.children.length&&this.cognitiveMixedNode(e)}))},addCognitiveFocus:function(e){let t=getComputedStyle(e).color;e.classList.add("ini-bf-cognitive-reading-color"),e.style.color=cognitiveReading.toRGBA(t,.5)},toRGBA:function(e,t=1){if(-1!==e.indexOf("rgba"))return e;if(-1!==e.indexOf("rgb"))return e.replace("rgb","rgba").replace(")",`, ${t})`);if(-1!==e.indexOf("#")){let n=e.replace("#","");return`rgba(${parseInt(n.substring(0,2),16)}, ${parseInt(n.substring(2,4),16)}, ${parseInt(n.substring(4,6),16)}, ${t=Math.min(Math.max(t,0),1)})`}return e},cognitiveSentence:function(e,t){let n=[];return e.split(/\s+/).forEach((e=>{0!==e.trim().length?n.push(cognitiveReading.congnitiveWord(e,t)):n.push(e)})),n.join(" ")},congnitiveWord(e,t){const n=cognitiveReading.charIndex(e);return`<b class="ini-bf-cognitive-reading" style="color: ${t} !important;">${e.slice(0,n)}</b>${e.slice(n)}`},charIndex:function(e){if(e.length<3)return 0;if(/\d/.test(e))return e.length;if(e.includes("[[[ini-bf-cognitive-reading-a]]]"))return 0;if(/^[#@&()–\[\]{}:;?/*`~$^+=<>.,]/.test(e))return 0;let n=Math.min(Math.floor(e.length/3),e.length-1);return 1===n&&e.length>2?2:n},isSkipNode:function(e){return 1!==e.nodeType||!(!e.className.includes("ini-bf-c")&&!e.id.includes("ini-bf-c"))||e.closest("#ini-bf-panel-box")}},virtualKeyboardBox={keyboardBox:document.getElementById("ini-bf-keyboard-box"),keyboard:null,selectedInput:null,init:function(){document.querySelector("#ini-bf-action-virtual-keyboard").addEventListener("iniBfTogglerChange",virtualKeyboardBox.virtualKeyboard),document.addEventListener("focusin",(()=>{const e=virtualKeyboardBox.isTextInput(),t=virtualKeyboardBox.keyboardBox;e?(virtualKeyboardBox.onInputFocus(e),e.addEventListener("input",virtualKeyboardBox.onInputChange)):"none"!==t.style&&(t.style.display="none")}),!0),document.addEventListener("click",(e=>{let t=e.target.nodeName.toLowerCase();null===e.target.closest("#ini-bf-keyboard-box")&&"input"!==t&&"textarea"!==t&&(virtualKeyboardBox.keyboardBox.style.display="none")})),virtualKeyboardBox.makeKeyboardDraggable()},isTextInput:function(){const e=document.activeElement,t=e.tagName,n=e.getAttribute("type");return!(!["TEXTAREA","INPUT"].includes(t)||["radio","checkbox","hidden"].includes(n)&&null!==n)&&e},onInputFocus:function(e){document.body.classList.contains("ini-bf-virtual-keyboard")&&(virtualKeyboardBox.keyboardBox.style.display="block",e.id||(e.id=virtualKeyboardBox.uid()),virtualKeyboardBox.selectedInput=`#${e.id}`,virtualKeyboardBox.keyboard.setOptions({inputName:e.id}))},onInputChange:function(e){document.body.classList.contains("ini-bf-virtual-keyboard")&&virtualKeyboardBox.keyboard.setInput(e.target.value,e.target.id)},virtualKeyboard:function(e){if(!e.target.classList.contains("ini-bf-active"))return document.body.classList.remove("ini-bf-virtual-keyboard"),void virtualKeyboardBox.keyboard.destroy();document.body.classList.add("ini-bf-virtual-keyboard");let t={newLineOnEnter:!0,onChange:e=>virtualKeyboardBox.onChange(e),onKeyPress:e=>virtualKeyboardBox.onKeyPress(e),theme:"ini-bf-simple-keyboard",physicalKeyboardHighlight:!0},n=virtualKeyboardBox.simpleKeyboardLayout();n&&(t.layout=n),virtualKeyboardBox.keyboard=new window.SimpleKeyboard.default(t)},simpleKeyboardLayout:function(){let layout='{"default":["^ 1 2 3 4 5 6 7 8 9 0 ß ´ {bksp}","{tab} q w e r t z u i o p ü + \\\\","{lock} a s d f g h j k l ö ä {enter}","{shift} y x c v b n m , . - {shift}",".com @ {space}"],"shift":["° ! \' § $ % & / ( ) = ? ` {bksp}","{tab} Q W E R T Z U I O P Ü * ","{lock} A S D F G H J K L Ö Ä \' {enter}","{shift} Y X C V B N M ; : _ {shift}",".com @ {space}"],"lang":{"de":"Deutsch"}}';if(!layout)return!1;layout=layout.replace(/\\\\u/g,"\\u");try{return JSON.parse(layout)}catch(e){return console.warn(e),!1}},onChange:function(e){document.querySelector(virtualKeyboardBox.selectedInput).value=e},onKeyPress:function(e){"{lock}"!==e&&"{shift}"!==e||virtualKeyboardBox.handleShiftButton()},handleShiftButton:function(){let e="default"===virtualKeyboardBox.keyboard.options.layoutName?"shift":"default";virtualKeyboardBox.keyboard.setOptions({layoutName:e})},uid:function(){return"bfini-"+Date.now().toString(36)+Math.random().toString(36).substring(2)},makeKeyboardDraggable:function(){let offsetX,offsetY,startX=0,startY=0,isDragging=!1;const keyboardBox=virtualKeyboardBox.keyboardBox,rootElement=document.documentElement;let currentX=0,currentY=0;function onDragStart(event){"touchstart"===event.type?(offsetX=event.touches[0].clientX-startX,offsetY=event.touches[0].clientY-startY):(offsetX=event.clientX-startX,offsetY=event.clientY-startY),event.target===keyboardBox&&(isDragging=!0)}function onDragEnd(){offsetX=startX,offsetY=startY,isDragging=!1}function onDragMove(event){isDragging&&("touchmove"===event.type?(currentX=event.touches[0].clientX-offsetX,currentY=event.touches[0].clientY-offsetY):(currentX=event.clientX-offsetX,currentY=event.clientY-offsetY),startX=currentX,startY=currentY,keyboardBox.style.transform=`translate3d(${currentX}px, ${currentY}px, 0)`)}rootElement.addEventListener("touchstart",onDragStart,!1),rootElement.addEventListener("touchend",onDragEnd,!1),rootElement.addEventListener("touchmove",onDragMove,!1),rootElement.addEventListener("mousedown",onDragStart,!1),rootElement.addEventListener("mouseup",onDragEnd,!1),rootElement.addEventListener("mousemove",onDragMove,!1)}},readingRuler={readingRulerEl:null,init:function(){document.querySelector("#ini-bf-action-reading-guide").addEventListener("iniBfTogglerChange",readingRuler.readingRuler)},readingRuler:function(e){e.target.classList.contains("ini-bf-active")?readingRuler.createReadingRuler():readingRuler.removeReadingRuler()},createReadingRuler:function(){document.querySelectorAll(".ini-bf-reading-guide-element").length||(readingRuler.addCSS(),readingRuler.readingRulerEl=document.createElement("div"),readingRuler.readingRulerEl.classList.add("ini-bf-reading-guide-element"),document.body.appendChild(readingRuler.readingRulerEl),document.addEventListener("mousemove",readingRuler.moveReadingRuler),document.addEventListener("click",readingRuler.moveReadingRuler))},moveReadingRuler:function(e){let t=e.clientX-Math.round(readingRuler.readingRulerEl.clientWidth/2),n=e.clientY;readingRuler.readingRulerEl.style.transform="translate3d("+t+"px,"+n+"px,0px)"},removeReadingRuler:function(){document.body.classList.remove("ini-bf-reading-guide"),readingRuler.readingRulerEl.remove(),document.removeEventListener("mousemove",readingRuler.moveReadingRuler),document.removeEventListener("click",readingRuler.moveReadingRuler)},addCSS:function(){document.body.classList.add("ini-bf-reading-guide")}},readingMask={readingMaskTop:null,readingMaskBottom:null,init:function(){document.querySelector("#ini-bf-action-reading-mask").addEventListener("iniBfTogglerChange",readingMask.readingMask)},readingMask:function(e){e.target.classList.contains("ini-bf-active")?readingMask.createReadingMask():readingMask.removeReadingMask()},createReadingMask:function(){document.querySelectorAll(".ini-bf-reading-mask-top").length||(document.body.classList.add("ini-bf-reading-mask"),readingMask.readingMaskTop=document.createElement("div"),readingMask.readingMaskTop.classList.add("ini-bf-reading-mask-top"),document.body.appendChild(readingMask.readingMaskTop),readingMask.readingMaskBottom=document.createElement("div"),readingMask.readingMaskBottom.classList.add("ini-bf-reading-mask-bottom"),document.body.appendChild(readingMask.readingMaskBottom),document.addEventListener("mousemove",readingMask.moveReadingMask))},moveReadingMask:function(t){let n=t.clientY,o=Math.round(95);readingMask.readingMaskTop.style.height=n-o+"px",readingMask.readingMaskBottom.style.top=`${n+o}px`},removeReadingMask:function(){document.body.classList.remove("ini-bf-reading-mask"),readingMask.readingMaskTop.remove(),readingMask.readingMaskBottom.remove(),document.removeEventListener("mousemove",readingMask.moveReadingMask)}},keyboardNavigation={init:function(){document.querySelector("#ini-bf-action-keyboard-navigation").addEventListener("iniBfTogglerChange",keyboardNavigation.keyboardNavigation)},keyboardNavigation:function(e){if(!e.target.classList.contains("ini-bf-active"))return document.body.classList.remove("ini-bf-keyboard-navigation"),keyboardNavigation.restoreOriginalTabIndex(),void(keyboardNavigation.enabled=!1);document.body.classList.add("ini-bf-keyboard-navigation"),keyboardNavigation.makeFocusable(),keyboardNavigation.enabled=!0},makeFocusable:function(){document.querySelectorAll('nav, [role="navigation"], h1, h2, h3, h4, h5, h6, [role="heading"], form:not([disabled]), button:not([disabled]), [role="button"]:not([disabled]), img, picture, svg').forEach((e=>{e.tabIndex<0&&(e.dataset.iniBfTabindexOrig=e.tabIndex,e.tabIndex=0)}))},restoreOriginalTabIndex:function(){document.querySelectorAll('nav, [role="navigation"], h1, h2, h3, h4, h5, h6, [role="heading"], form:not([disabled]), button:not([disabled]), [role="button"]:not([disabled]), img, picture, svg').forEach((e=>{null!=e.dataset.iniBfTabindexOrig&&(e.tabIndex=e.dataset.iniBfTabindexOrig,delete e.dataset.iniBfTabindexOrig)}))},setFocus:function(selector,forward=!0){if(!document.activeElement)return;let focusableElements=Array.prototype.filter.call(document.querySelectorAll(selector),(element=>element.offsetWidth>0||element.offsetHeight>0||element===document.activeElement)),currentIndex=focusableElements.indexOf(document.activeElement);if(currentIndex>-1){(forward?focusableElements[currentIndex+1]||focusableElements[0]:focusableElements[currentIndex-1]||focusableElements[focusableElements.length-1]).focus()}else forward?focusableElements[0].focus():focusableElements[focusableElements.length-1].focus()}},voiceNavi={init:function(){let e=document.querySelector("#ini-bf-action-voice-navigation");new P?(window.iniBfVNavMicroModal=q,function(){const containerId="ini-bf-voice-navigation",container=document.createElement("div");container.id=containerId,container.setAttribute("aria-hidden","true");const overlay=document.createElement("div");overlay.id=`${containerId}-overlay`,overlay.setAttribute("tabindex","-1");const content=document.createElement("div");content.id=`${containerId}-content`,content.setAttribute("role","dialog"),content.setAttribute("aria-modal","true"),content.setAttribute("aria-label",on.voiceNavigationCommands);const commandsForm=document.createElement("div");commandsForm.id="ini-bf-voice-navigation-commands-form";const recordButton=document.createElement("button");recordButton.id="ini-bf-voice-navigation-record-button",recordButton.ariaLabel=on.voiceNavigationStart,recordButton.disabled=!0,recordButton.addEventListener("click",(()=>{P.manageRecognition(!document.body.classList.contains("ini-bf-recognition-running"))})),commandsForm.appendChild(recordButton);const commandsFieldset=document.createElement("fieldset");commandsFieldset.id="ini-bf-voice-navigation-fieldset";const legend=document.createElement("legend");legend.innerText=on.voiceNavigationLegend,commandsFieldset.appendChild(legend);const historyInput=document.createElement("input");historyInput.type="text",historyInput.id="ini-bf-voice-navigation-history",historyInput.name="ini-bf-voice-navigation-history",historyInput.ariaLabel=on.voiceNavigationHistory,historyInput.autocomplete="off",historyInput.disabled=!0,commandsFieldset.appendChild(historyInput);const inputLabel=document.createElement("label");inputLabel.htmlFor="ini-bf-voice-navigation-input",inputLabel.innerText=on.voiceNavigationWait,inputLabel.style.visibility="hidden",commandsFieldset.appendChild(inputLabel);const inputField=document.createElement("input");if(inputField.type="text",inputField.id="ini-bf-voice-navigation-input",inputField.autocomplete="off",inputField.placeholder=on.voiceNavigationWait,inputField.disabled=!0,commandsFieldset.appendChild(inputField),"on"===window.iniBfPreferences.voiceNavigationVoiceGraph){const voiceGraph=document.createElement("canvas");voiceGraph.id="ini-bf-voice-visualization",commandsFieldset.appendChild(voiceGraph)}commandsForm.appendChild(commandsFieldset);const commandsTriggerButton=document.createElement("button");commandsTriggerButton.id="ini-bf-voice-navigation-commands-trigger",commandsTriggerButton.dataset.accordion="collapse",commandsTriggerButton.ariaLabel=on.voiceNavigationCommands,commandsTriggerButton.addEventListener("click",(()=>{const accordionEvent=new CustomEvent("iniBfVCAccordion",{detail:commandsTriggerButton.dataset.accordion});window.dispatchEvent(accordionEvent)})),commandsForm.appendChild(commandsTriggerButton);const closeButton=document.createElement("button");closeButton.id=`${containerId}-close-button`,closeButton.ariaLabel=on.voiceNavigationClose,closeButton.addEventListener("click",(()=>{P.manageRecognition(!1);const voiceNavButton=document.querySelector("#ini-bf-action-voice-navigation");voiceNavButton&&voiceNavButton.click()})),commandsForm.appendChild(closeButton),content.appendChild(commandsForm);const commandsList=function(){const{voiceNavigation:voiceNavigation,voiceNavigationAliases:voiceNavigationAliases,voiceNavigationDescription:voiceNavigationDescription}=window.iniBfPreferences;new voiceNavHandler;const listContainer=document.createElement("div");listContainer.classList.add("ini-bf-voice-navigation-commands-list");const commandsContainer=document.createElement("div");commandsContainer.classList.add("ini-bf-voice-navigation-commands-container");for(const[group,commands]of Object.entries(voiceNavigation)){const commandGroup=document.createElement("div");commandGroup.classList.add("ini-bf-voice-navigation-command-group");const groupHeader=document.createElement("p"),alias=voiceNavigationAliases[group]??group,iconHtml=`<img src="${window.iniBfPreferences.pluginURL}/svgs/${group.replaceAll("_","-")}.svg" alt="${alias}" >`,description=voiceNavigationDescription[group];groupHeader.innerHTML=`<span class="ini-bf-voice-navigation-icon">${iconHtml}</span><strong>${alias}</strong><span>–</span><span>${description}</span>`,commandGroup.appendChild(groupHeader);const commandsSection=document.createElement("div");commandsSection.classList.add("ini-bf-voice-navigation-commands"),commands.forEach((command=>{const commandButton=document.createElement("button");commandButton.classList.add("ini-bf-voice-navigation-command"),commandButton.setAttribute("data-command",command),commandButton.setAttribute("data-command-group",group),commandButton.innerText=getVoiceCommand(group,command),commandsSection.appendChild(commandButton)})),commandGroup.appendChild(commandsSection),commandsContainer.appendChild(commandGroup)}return listContainer.appendChild(commandsContainer),window.addEventListener("iniBfVCAccordion",(event=>{const accordionTrigger=document.querySelector("#ini-bf-voice-navigation-commands-trigger");if(accordionTrigger)switch(event.detail){case"collapse":listContainer.classList.remove("expand-commands-accordion"),listContainer.classList.add("collapse-commands-accordion"),accordionTrigger.dataset.accordion="expand";break;case"expand":listContainer.classList.remove("collapse-commands-accordion"),listContainer.classList.add("expand-commands-accordion"),accordionTrigger.dataset.accordion="collapse"}})),listContainer.addEventListener("scroll",updateScrollGradient),listContainer.addEventListener("click",(event=>{if(event.preventDefault(),"BUTTON"!==event.target.tagName)return;if(!document.querySelector("#ini-bf-voice-navigation-input"))return;const command=event.target.dataset.command,commandGroup=event.target.dataset.commandGroup;updateVoiceNavigationInputDisplay(voiceNavigationAliases[command]??command,window.iniBfPreferences.translation.voiceNavigationStart);const voiceNaviActionEvent=new CustomEvent("iniBfVoiceNaviAction",{detail:{command:command,commandGroup:commandGroup,number:"number"===commandGroup&&P.recognizeNumberCommand(event.target.innerText)}});window.dispatchEvent(voiceNaviActionEvent)})),listContainer}();content.appendChild(commandsList),container.appendChild(content),document.body.appendChild(container)}(),e.addEventListener("iniBfTogglerChange",voiceNavi.voiceNavigation)):e.classList.add("ini-bf-disabled")},voiceNavigation:function(e){const t="ini-bf-voice-navigation";if(!e.target.classList.contains("ini-bf-active"))return document.body.classList.remove(t),void window.iniBfVNavMicroModal.close(t);document.body.classList.add(t),window.iniBfVNavMicroModal.show(t,{onClose:e=>{e.id&&e.id===t&&P.manageRecognition(!1)},onShow:e=>{e.id&&e.id===t&&P.manageRecognition(!0)},closeTrigger:"ini-bf-data-voice-navi-close",openTrigger:"ini-bf-voice-navi-open",disableScroll:!1,disableFocus:!0,awaitOpenAnimation:!1,awaitCloseAnimation:!1})}},linkNavigator={select:document.getElementById("ini-bf-linknav"),init:function(){linkNavigator.buildSelect(),linkNavigator.select.addEventListener("change",(e=>{window.location.href=e.target.value}))},crawlLinks:function(){const anchorElements=document.querySelectorAll("a"),linksArray=[];linksArray.push(["Home",window.location.origin]);for(let i=0;i<anchorElements.length;i++){let linkText=anchorElements[i].innerText;if(linkText=linkText.replace(/\s+/g," ").trim(),""===linkText)continue;linkText=linkText.substring(0,42);let href=anchorElements[i].href;if(href=href.trim(),href=href.replace(/#$/,""),href=href.replace(/\/$/,""),""!==href&&"#"!==href&&!href.toLowerCase().startsWith("javascript:")){linksArray.some((existingLink=>existingLink[1]===href))||linksArray.push([linkText,href])}}return linksArray},buildSelect:function(){let e=linkNavigator.crawlLinks();for(let t=0;t<e.length;t++){let n=document.createElement("option");n.textContent=e[t][0],n.value=e[t][1],linkNavigator.select.appendChild(n)}}},resetIniBf={init:function(){let e=document.getElementById("ini-bf-reset-btn");e&&e.addEventListener("click",resetIniBf.reset)},reset:function(e){e.preventDefault();let t=Object.keys(localStorage);for(const e in t)t[e].toString().startsWith("iniBfStore")&&localStorage.removeItem(t[e]);location.reload()}},panelClose={init:function(){let e=document.getElementById("ini-bf-hide-btn");e&&e.addEventListener("click",panelClose.hide)},hide:function(){closePanel()}};function setupNavigationShortcut(hotkey,selector){hotkeys(`${hotkey},shift+${hotkey}`,(function(event,handler){if(!document.body.classList.contains("ini-bf-keyboard-navigation"))return;event.preventDefault();let forwardFocus=!0;handler.key.startsWith("shift+")&&(forwardFocus=!1),keyboardNavigation.setFocus(selector,forwardFocus)}))}function initPanel(settings){if(window.document.cookie.indexOf("ini-bf-hide=1")>-1){const panelBox=document.querySelector("#ini-bf-panel-box"),triggerButton=document.querySelector("#ini-bf-trigger-button");return panelBox&&panelBox.remove(),void(triggerButton&&triggerButton.remove())}e=settings,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initialize):initialize()}function initialize(){const panelBox=document.querySelector("#ini-bf-panel-box");var hotkeysConfig;panelBox&&panelBox.removeAttribute("style"),window.bfIniMicModal=q,window.bfIniMicModal.init("ini-bf-panel-box",{onClose:modal=>{"ini-bf-panel-box"===modal.id&&closeTriggerElements()},openTrigger:"data-bf-ini-trigger",closeTrigger:"data-bf-ini-close",disableScroll:!1,disableFocus:!1}),document.addEventListener("click",handlePanelInteraction,!1),initPanelDrag(),hotkeysConfig=e,hotkeys(hotkeysConfig.hotKeyOpenInterface,(function(event){event.preventDefault(),togglePanelVisibility()})),setupNavigationShortcut(hotkeysConfig.hotKeyMenu,'nav, [role="navigation"]'),setupNavigationShortcut(hotkeysConfig.hotKeyHeadings,'h1, h2, h3, h4, h5, h6, [role="heading"]'),setupNavigationShortcut(hotkeysConfig.hotKeyForms,"form:not([disabled])"),setupNavigationShortcut(hotkeysConfig.hotKeyButtons,'button:not([disabled]), [role="button"]:not([disabled])'),setupNavigationShortcut(hotkeysConfig.hotKeyGraphics,"img, picture, svg"),document.body.onkeydown=function(event){if(32===(event.keyCode||event.charCode||event.which)){const activeElement=document.activeElement;(activeElement.classList.contains("ini-bf-accessibility-profile-item")||activeElement.classList.contains("ini-bf-switch-box")||activeElement.classList.contains("ini-bf-color"))&&(event.preventDefault(),activeElement.click())}},function(){let features=[adjustableFunctions,switchBox,colorPallettes,resetIniBf,panelClose,a,alignLeft,alignRight,alignCenter,backgroundColors,textColors,titleColors,cursorBk,cursorWhite,fontSize,lineHeight,letterSpacing,titleHighlight,linkHighlight,scaleContents,dyslexia,readableFont,highContrast,blackContrast,fairContrast,highSaturation,lowSaturation,hideImgs,highlightHover,highlightFocus,magnifier,muteWebsite,stopAnims,monochrome,cognitiveReading,virtualKeyboardBox,readingRuler,readingMask,keyboardNavigation,voiceNavi,linkNavigator];const bundle=[];let available=["tts","voiceselector","eztext","ezspeak"];const bundleKeys=bundle.map((obj=>Object.keys(obj)[0])),nonMatches=available.filter((entry=>!bundleKeys.includes(entry)));console.log(nonMatches),nonMatches.forEach((nonMatches=>removeFeature(nonMatches))),features.push(...bundle.map((obj=>Object.values(obj)[0]))),0==ezai&&(removeFeature("eztext"),removeFeature("ezspeak"));features.forEach((feature=>feature.init()))}(),hasIniBfStoreKey()&&(switchBox.loadSettings(),adjustableFunctions.loadSettings(),colorPallettes.loadSettings(),voiceselector.loadSettings(),a.loadSaved(),function(e){Ln.push(e)}()),t.init()}function removeFeature(feature){switch(feature){case"tts":document.getElementById("ini-bf-action-tts").remove();break;case"voiceselector":document.getElementById("ini-bf-action-langchoice").remove();break;case"eztext":document.getElementById("ini-bf-action-eztext").remove();break;case"ezspeak":document.getElementById("ini-bf-action-ezspeak").remove()}}function capitalizeWords(text,separator=" "){return text.toLowerCase().split(separator).map((word=>word.charAt(0).toUpperCase()+word.slice(1))).join(separator)}function toCamelCase(text,separator="_",prefix="",suffix=""){let result="";return(prefix+separator+text+separator+suffix).toLowerCase().split(separator).forEach(((word,index)=>{result+=0===index?word.toLowerCase():word.charAt(0).toUpperCase()+word.slice(1)})),result}function hasIniBfStoreKey(){return Object.keys(localStorage).some((key=>key.includes("iniBfStore")))}function createDebouncedFunction(func,delay){let timeoutId=null;return function(...args){clearTimeout(timeoutId),timeoutId=setTimeout((()=>func.apply(this,args)),delay||0)}}return{run:function(e){initPanel(e)}}})();Fn.run(window.iniBfPreferences)})();
