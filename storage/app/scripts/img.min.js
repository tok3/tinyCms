(()=>{"use strict";const scripts=document.getElementsByTagName("script"),pathSegments=(Array.from(scripts).find((script=>script.src.includes("altstar.js"))),new URL(document.currentScript.src).pathname.split("/")),ulid=pathSegments[pathSegments.length-2],iniBfUrl=new URL(document.currentScript.src);document.addEventListener("DOMContentLoaded",(()=>{iniBfUrl.pathname.split("/");const images=document.querySelectorAll('img:not([aria-label]):not([alt]), img[alt=""]'),imageUrls=Array.from(images).map((img=>{try{let url=new URL(img.getAttribute("src"),window.location.origin);return url.origin+url.pathname}catch(error){return console.warn(`Invalid URL for image: ${img.getAttribute("src")}`,error),null}})).filter((src=>src));0!==imageUrls.length?fetch("https://aktion-barrierefrei.org/imageDescription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({urls:imageUrls,ulid:ulid})}).then((response=>{if(!response.ok)throw new Error("Network response was not ok");return response.json()})).then((data=>{images.forEach((img=>{let absoluteSrc;try{absoluteSrc=new URL(img.getAttribute("src"),window.location.origin).href}catch(error){return void console.warn(`Skipping invalid image src: ${img.getAttribute("src")}`,error)}const descriptionEntry=data.find((item=>item.url.replace(/\\\//g,"/")===absoluteSrc));descriptionEntry&&descriptionEntry.description?(img.setAttribute("alt",descriptionEntry.description),console.log(`Added alt="${descriptionEntry.description}" to image: ${absoluteSrc}`)):console.warn(`No description found for image: ${absoluteSrc}`)}))})).catch((error=>{console.error("Error fetching image descriptions:",error)})):console.log("No valid images without alt or aria-label found.")}))})();
/*altstar.js*/
